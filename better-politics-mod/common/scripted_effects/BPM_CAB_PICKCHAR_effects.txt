# --CABGENSCRIPT_BASE --
bpm_cab_fill_positions = {
    bpm_cab_fill_position_inst = { INST = colonial_affairs }
    bpm_cab_fill_position_inst = { INST = social_security }
    bpm_cab_fill_position_inst = { INST = workplace_safety }
    bpm_cab_fill_position_inst = { INST = schools }
    bpm_cab_fill_position_inst = { INST = police }
    bpm_cab_fill_position_inst = { INST = health_system }
    bpm_cab_fill_position_inst = { INST = home_affairs }
    bpm_cab_fill_position_inst = { INST = centralization }
    bpm_cab_fill_position_inst = { INST = suffrage }
    bpm_cab_fill_position_inst = { INST = culture }
    bpm_cab_update_synergy = yes
}

bpm_cab_fill_position_inst = {
    if = {
        limit = {
            OR = {
                NOT = { has_variable = bpm_is_institution_$INST$ }
                var:bpm_is_institution_$INST$ ?= {
                    is_character_alive = no
                }
                NOT = { exists = var:bpm_is_institution_$INST$ }
            }
        }
        if = {
            limit = {
                OR = {
                    variable_list_size = {
                        name = bpm_CAB_char_select_pool
                        value = 0 
                    }
                    NOT = { has_variable_list = bpm_CAB_char_select_pool }
                }

            }
            bpm_pick_cabinet_minister = yes
        }
        random_in_list = {
            variable = bpm_CAB_char_select_pool
            save_scope_as = actor_$INST$
        }
        scope:actor_$INST$ = {
            set_variable = {
                name = bpm_cabinet_minister
                value = owner.institution:institution_$INST$
            }
        }
        set_variable = {
            name = bpm_is_institution_$INST$
            value = scope:actor_$INST$
        }
        remove_list_variable = {
            name = bpm_CAB_char_select_pool
            target = scope:actor_$INST$
        }
    }
}