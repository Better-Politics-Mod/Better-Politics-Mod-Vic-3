namespace = communism

communism.8 = {
	type = country_event
	placement = root
	title = communism.8.t
	desc = communism.8.d
	flavor = communism.8.f

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	event_image = {
		video = "unspecific_military_parade"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	
	trigger = {
		has_law = law_type:law_council_republic
		NOT = {	has_variable = red_army_var }
		ig:ig_armed_forces = {
			leader = {
				bpm_leader_is_socialist = yes
			}
		}
	}

	immediate = {
		ig:ig_armed_forces = {
			save_scope_as = red_army_ig
			leader = {
				save_scope_as = red_army_general
			}
		}
		set_variable = red_army_var
	}

	option = {
		name = communism.8.a
		ig:ig_armed_forces = {
			custom_tooltip = red_army_tt
			hidden_effect = {
				set_interest_group_name = ig_red_army
			}
			remove_ideology = ideology_jingoist
			remove_ideology = ideology_dop_oligarch
			add_ideology = ideology_dop_party_socialist
			add_ideology = ideology_mil_mass_army
		}
	}
}