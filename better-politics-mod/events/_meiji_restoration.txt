namespace = meiji

# Fall of the Samurai
meiji.3 = {
	type = country_event
	placement = root
	title = meiji.3.t
	desc = meiji.3.d
	flavor = meiji.3.f

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_military.dds"
	event_image = {
		video = "asia_westerners_arriving"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		# triggered by JE
	}

	immediate = {
		set_global_variable = fall_of_the_samurai_global_var
		ig:ig_armed_forces = {
			save_scope_as = samurai_ig
			leader = {
				save_scope_as = samurai_ig_leader
			}
		}
	}

	option = { # give former samurai officer positions in the new army
		name = meiji.3.a
		default_option = yes
		custom_tooltip = samurai_rename.tt
		hidden_effect = {
			scope:samurai_ig = {
				set_interest_group_name = ig_armed_forces
			}
		}
		scope:samurai_ig = {
			remove_ideology = ideology_dop_oligarch
			remove_ideology = ideology_eco_trad_isolationist
			add_ideology = ideology_dop_autocrat
			bpm_reorder_ideologies = yes
		}
		# reduce mil tech spread
		add_modifier = {
			name = samurai_officers
			months = normal_modifier_time
		}
	}
	option = { # expel the samurai from the army
		name = meiji.3.b
		custom_tooltip = samurai_rename.tt
		hidden_effect = {
			scope:samurai_ig = {
				set_interest_group_name = ig_armed_forces
			}
		}
		scope:samurai_ig = {
			remove_ideology = ideology_dop_oligarch
			remove_ideology = ideology_eco_trad_isolationist
			add_ideology = ideology_dop_autocrat
			bpm_reorder_ideologies = yes
		}
		scope:samurai_ig_leader = { # honorable sudoku
			kill_character = yes
		}
		add_radicals = {
			pop_type = officers
			culture = cu:japanese
			value = 0.8
		}
		add_radicals = {
			pop_type = soldiers
			culture = cu:japanese
			value = 0.5
		}
	}
}

meiji.14 = {
	type = country_event
	placement = root
	title = meiji.14.t
	desc = meiji.14.d
	flavor = meiji.14.f

	dlc = dlc_bpm

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "asia_farmers_market"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		exists = c:JAP
		THIS = c:JAP
		has_law = law_type:law_free_trade
		NOT = { has_variable = bpm_gold_crisis_happened }
	}

	immediate = {
		# n/a
	}

	option = {
		name = meiji.14.a
		add_radicals = {
			value = small_radicals
			pop_type = shopkeepers
		}
		add_modifier = {
			name = bpm_gold_crisis
			months = 12
		}
		change_variable = {
			name = shogunate_var
			add = 5
		}
		hidden_effect = {
			set_variable = bpm_gold_crisis_happened
		}
	}
}

meiji.15 = {
	type = country_event
	placement = root
	title = meiji.15.t
	desc = meiji.15.d
	flavor = meiji.15.f

	dlc = dlc_bpm

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "unspecific_devastation"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		exists = c:JAP
		THIS = c:JAP
		has_law = law_type:law_free_trade
	}

	immediate = {
		#
	}

	option = {
		name = meiji.15.a

		random_scope_state = {
			limit = { has_port = yes }
			kill_population_in_state = {
				value = 5
				pop_type = soldiers
			}
			kill_population_in_state = {
				value = 1
				pop_type = officers
			}
			add_radicals_in_state = {
                value = small_radicals
            }
		}

		change_variable = {
			name = shogunate_var
			add = 1
		}
	}
}

meiji.16 = {
	type = country_event
	placement = root
	title = meiji.16.t
	desc = meiji.16.d
	flavor = meiji.16.f

	dlc = dlc_bpm

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "asia_union_leader"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		exists = c:JAP
		THIS = c:JAP
		has_law = law_type:law_free_trade
	}

	immediate = {
		#
	}

	option = {
		name = meiji.16.a

		random_scope_state = {
			add_radicals_in_state = {
                value = small_radicals
            }
		}

		change_variable = {
			name = shogunate_var
			add = 2
		}
	}
}
