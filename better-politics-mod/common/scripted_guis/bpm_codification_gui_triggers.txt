bpm_codification_is_traditional_sg = {
    scope = law
    is_valid = {
        owner = { save_temporary_scope_as = associated_country }
        type = { bpm_codification_is_traditional = yes }
    }
}

bpm_codification_is_decree_sg = {
    scope = law
    is_valid = {
        owner = { save_temporary_scope_as = associated_country }
        type = { bpm_codification_is_decree = yes }
    }
}


bpm_codification_is_legal_sg = {
    scope = law
    is_valid = {
        owner = { save_temporary_scope_as = associated_country }
        type = { bpm_codification_is_legal = yes }
    }
}

bpm_codification_is_constitutional_sg = {
    scope = law
    is_valid = {
        owner = { save_temporary_scope_as = associated_country }
        type = { bpm_codification_is_constitutional = yes }
    }
}

bpm_codification_can_be_traditional_sg = {
    scope = law
    is_valid = {
        type = { bpm_codification_can_be_traditional = yes }
    }
}

bpm_codification_can_be_decree_sg = {
    scope = law
    is_valid = {
        type = { bpm_codification_can_be_decree = yes }
    }
}

bpm_codification_can_be_legal_sg = {
    scope = law
    is_valid = {
        type = { bpm_codification_can_be_legal = yes }
    }
}

bpm_codification_can_be_constitutional_sg = {
    scope = law
    is_valid = {
        type = { bpm_codification_can_be_constitutional = yes }
    }
}

bpm_codification_decree_law = {
    scope = law 
    is_valid = {
        save_temporary_scope_as = bpm_selected_law
        custom_tooltip = {
            text = bpm_codification_decree_cooldown 
            owner = { NOT = { has_variable = bpm_decree_cooldown } }
        }
        owner = {
            trigger_if = {
                limit = {
                    has_law = law_type:law_supreme_legislature
                }
                custom_tooltip = {
                    text = bpm_codification_cannot_do_decree_on_supreme_legislature
                    always = no
                }
            }
            trigger_else_if = {
                limit = {
                    bpm_ruler_is_dominant = yes
                }
                custom_tooltip = {
                    text = bpm_codification_ruler_supports
                    OR = {
                        ruler = {
                            law_stance = {
                                law = scope:bpm_selected_law.type
                                value > neutral
                            }
                        }
                        AND = {
                            ruler = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value = neutral
                                }
                            }
                            ruler.interest_group = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value > neutral
                                }
                            }
                        }
                    }
                }
            }
            trigger_else_if = {
                limit = {
                    bpm_hog_is_dominant = yes
                }
                custom_tooltip = {
                    text = bpm_codification_hog_supports
                    OR = {
                        var:bpm_headofgov = {
                            law_stance = {
                                law = scope:bpm_selected_law.type
                                value > neutral
                            }
                        }
                        AND = {
                            var:bpm_headofgov = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value = neutral
                                }
                            }
                            var:bpm_headofgov.interest_group = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value > neutral
                                }
                            }
                        }
                    }
                }

            }
            trigger_else_if = {
                limit = {
                    bpm_ruler_hog_balance = yes
                }
                custom_tooltip = {
                    text = bpm_codification_hog_supports
                    OR = {
                        var:bpm_headofgov = {
                            law_stance = {
                                law = scope:bpm_selected_law.type
                                value > neutral
                            }
                        }
                        AND = {
                            var:bpm_headofgov = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value = neutral
                                }
                            }
                            var:bpm_headofgov.interest_group = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value > neutral
                                }
                            }
                        }
                    }
                }
                custom_tooltip = {
                    text = bpm_codification_ruler_supports
                    OR = {
                        ruler = {
                            law_stance = {
                                law = scope:bpm_selected_law.type
                                value > neutral
                            }
                        }
                        AND = {
                            ruler = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value = neutral
                                }
                            }
                            ruler.interest_group = {
                                law_stance = {
                                    law = scope:bpm_selected_law.type
                                    value > neutral
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    effect = {
        save_scope_as = bpm_selected_law
        owner = {
            trigger_event = { id = bpm_codification_events.1 popup = yes }
        }
    }
}