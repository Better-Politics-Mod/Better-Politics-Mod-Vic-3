namespace = peoples_springtime

# The Spark
# Country has a revolution including Radicals
peoples_springtime.1 = {
	type = country_event
	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.1.t
	desc = peoples_springtime.1.d
	flavor = peoples_springtime.1.f

	trigger = {
		NOT = { has_global_variable = peoples_springtime_happening }
		NOT = { has_global_variable = peoples_springtime_happened }
		has_global_variable = bpm_je_march_to_radicalism_progress
		global_var:bpm_je_march_to_radicalism_progress >= 100
		
		bpm_country_is_in_europe = yes
		any_interest_group = {
			is_marginal = no
			OR = {
				is_revolutionary = yes
				owner = { is_secessionist = yes }
			}
			OR = {
				bpm_ig_is_radical_left = yes
				leader = { bpm_leader_is_radical_leftist = yes }
				any_scope_character = {
					has_role = agitator
					bpm_leader_is_radical_leftist = yes
				}
			}
		}
	}

	immediate = {
		set_global_variable = {
			name = peoples_springtime_happening
		}
		random_interest_group = {
			limit = {
				is_marginal = no
				OR = {
					is_insurrectionary = yes
					ig_approval < -10 # ANGERY
				}
				OR = {
					bpm_ig_is_radical_left = yes
					leader = { bpm_leader_is_radical_leftist = yes }
					any_scope_character = {
						has_role = agitator
						bpm_leader_is_radical_leftist = yes
					}
				}
			}
			leader = { save_scope_as = radical_ig_leader }
		}
	}

	duration = 3

	option = {
		name = peoples_springtime.1.a
		scope:radical_ig_leader = {
			add_modifier = {
				name = revolutionary_hero
				months = normal_modifier_time
			}
		}
	}

    option = {
		name = peoples_springtime.1.b
        default_option = yes
        scope:radical_ig_leader = {
        	add_modifier = {
        		name = treasonous_traitor
        		months = normal_modifier_time
        	}
        }
	}
}

# The Spread
# Neighboring country has the Journal Entry
peoples_springtime.2 = {
	type = country_event
	event_image = {
		video = "europenorthamerica_political_extremism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.2.t
	desc = peoples_springtime.2.d
	flavor = peoples_springtime.2.f

	trigger = {
		# Triggered by peoples_springtime.4
	}

	duration = 3

	immediate = {
		random_interest_group = {
			limit = {
				is_marginal = no
				bpm_ig_can_have_radical_leader_1848 = yes
			}
			save_scope_as = radical_ig
		}
	}

	option = {
		name = peoples_springtime.2.a
		scope:radical_ig = {
			leader = { 
				set_ideology = ideology:ideology_radical 
				add_modifier = {
					name = revolutionary_hero
					months = normal_modifier_time
				}
			}
		}
	}

    option = {
		name = peoples_springtime.2.b
        default_option = yes
        scope:radical_ig = {
        	leader = { 
				set_ideology = ideology:ideology_radical
				add_modifier = {
					name = treasonous_traitor
					months = normal_modifier_time
				}
		 	}
        }
	}
}

# More Radical Leaders
# Once you have the Journal Entry, more IGs want in on the action
peoples_springtime.3 = {
	type = country_event
	event_image = {
		video = "votp_agitator_speaking"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.3.t
	desc = peoples_springtime.3.d
	flavor = peoples_springtime.3.f

	trigger = {
		has_journal_entry = je_springtime_of_the_peoples
		# has_technology_researched = egalitarianism

		any_interest_group = {
			is_marginal = no
			bpm_ig_can_have_radical_leader_1848 = yes
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				is_marginal = no
				bpm_ig_can_have_radical_leader_1848 = yes
			}
			save_scope_as = radical_ig
		}
	}

	duration = 3

	option = {
		name = peoples_springtime.3.a
		ai_chance = {
			base = 25
		}
		custom_tooltip = {
			text = peoples_springtime.3.a.tt
			create_character = {
				ig_leader = yes
				ideology = ideology_radical
				interest_group = scope:radical_ig
			}
		}
	}

	option = {
		name = peoples_springtime.3.b
		trigger = {
			empty_agitator_slots >= 1
		}
		ai_chance = {
			base = 75
			modifier = {
				trigger = {
					scope:radical_ig = {
						ig_approval < -5
					}
				}
				add = -50
			}
		}
		scope:radical_ig = {
			add_modifier = {
				name = dissident_radical_faction
				months = short_modifier_time
			}
		}
		create_character = {
			is_agitator = yes
			ideology = ideology_radical
			interest_group = scope:radical_ig
		}
		default_option = yes
	}
}

# Propagation
# Deliberately spread Radicalism to neighbor
peoples_springtime.4 = {
	type = country_event
	event_image = {
		video = "europenorthamerica_political_extremism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.4.t
	desc = peoples_springtime.4.d
	flavor = peoples_springtime.4.f

	trigger = {
		has_journal_entry = je_springtime_of_the_peoples
		any_neighbouring_state = {
			owner = {
				any_interest_group = {
					is_powerful = yes
					bpm_ig_can_have_radical_leader_1848 = yes
				}
			}
		}
	}

	duration = 3

	cooldown = { months = normal_modifier_time }

	option = {
		name = peoples_springtime.4.a
		random_neighbouring_state = {
			limit = {
				owner = {
					any_interest_group = {
						is_powerful = yes
						bpm_ig_can_have_radical_leader_1848 = yes
					}
				}
			}
			owner = {
				trigger_event = {
					id = peoples_springtime.2
					days = 0
				}
			}
		}
		every_interest_group = {
			limit = {
				OR = {
					bpm_ig_is_radical_left = yes
					leader = { bpm_leader_is_radical_leftist = yes }
				}
			}
			add_modifier = {
				name = spread_the_revolution
				months = short_modifier_time
			}
		}
	}

	option = {
		name = peoples_springtime.4.b
		every_interest_group = {
			limit = {
				OR = {
					bpm_ig_is_radical_left = yes
					leader = { bpm_leader_is_radical_leftist = yes }
				}
			}
			add_modifier = {
				name = constrained_the_revolution
				months = short_modifier_time
			}
		}
		default_option = yes
	}
}

# Low-key Revolutionary activity causes Turmoil
peoples_springtime.5 = {
	type = country_event
	event_image = {
		video = "votp_agitators_sneaking"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.5.t
	desc = peoples_springtime.5.d
	flavor = peoples_springtime.5.f

	trigger = {
		has_journal_entry = je_springtime_of_the_peoples
		any_interest_group = {
			is_marginal = no
			OR = {
				bpm_ig_is_radical_left = yes
				leader = { bpm_leader_is_radical_leftist = yes }
			}
			ig_approval <= unhappy
		}
	}

	duration = 3

	option = {
		name = peoples_springtime.5.a
		trigger = {
			any_scope_state = {
				is_incorporated = yes
				is_capital = no
			}
		}
		random_scope_state = {
			limit = {
				is_incorporated = yes
				is_capital = no
			}
			add_radicals_in_state = {
				value = medium_radicals
			}
		}
	}

	option = {
		name = peoples_springtime.5.b
		if = {
			limit = {
				any_scope_state = {
					is_incorporated = yes
					is_capital = no
				}
			}
			capital = {
				add_radicals_in_state = {
					value = medium_radicals
				}
			}
		}
		else = {
			capital = {
				add_radicals_in_state = {
					value = small_radicals
				}
			}
		}
		default_option = yes
	}
}

# End of the Springtime of the Peoples
peoples_springtime.6 = {
	type = country_event
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.6.t
	desc = peoples_springtime.6.d
	flavor = peoples_springtime.6.f

	trigger = {
		NOT = { has_variable = peoples_springtime_fully_ended }
		has_variable = completed_peoples_springtime_je
		has_revolution = no
		has_any_secessionists_broken_out = no
		is_revolutionary = no
		is_secessionist = no
	}

	duration = 3

	immediate = {
		set_variable = peoples_springtime_fully_ended
		ig:ig_liberals = {
			leader = { set_ideology = ideology:ideology_center_leader }
		}
		ig:ig_agrarian_populists = {
			leader = { set_ideology = ideology:ideology_center_leader }
		}
		every_interest_group = {
			limit = {
				bpm_ig_is_institutional = yes
				NOT = { is_interest_group_type = ig_trade_unions }
				leader = {
					OR = {
						has_ideology = ideology:ideology_radical
						has_ideology = ideology:ideology_republican_leader
					}
				}
			}
			leader = { set_ideology = ideology:ideology_liberal_leader }
		}
		# Revolution successful
		if = {
			limit = {
				bpm_country_is_republic = yes
				OR = {
					has_law = law_type:law_wealth_voting
					has_law = law_type:law_census_voting
					has_law = law_type:law_universal_suffrage
				}
			}
			trigger_event = { id = peoples_springtime.7 days = 30 popup = yes }
		}
		# Revolution Failed
		else_if = {
			limit = {
				bpm_country_laws_ok_voting = no
				is_player = no
			}
			bpm_add_political_stability_huge = yes
			if = {
				limit = { has_law = law_type:law_no_home_affairs }
				activate_law = law_type:law_national_guard
			}
		}
		# Revolution Vanquished
		if = {
			limit = {
				bpm_country_is_republic = no
				NOT = {
					any_interest_group = {
						bpm_ig_is_radical_left = yes
						is_marginal = no
					}
				}
			}
			trigger_event = { id = peoples_springtime.8 popup = yes }
		}
	}

	option = {
		name = peoples_springtime.6.a
		if = {
			limit = {
				bpm_country_is_republic = no
				OR = {
					bpm_country_laws_ok_voting = yes
					this = c:GBR
				}
			}
			ig:ig_radicals = {
				bpm_remove_all_gov_ideologies = yes
				bpm_reorder_ideologies = yes
			}
			bpm_add_political_stability_big = yes
		}
		default_option = yes
	}
}

# The Revolution Victorious
peoples_springtime.7 = {
	type = country_event

	event_image = {
		video = "votp_barricade"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.7.t
	desc = peoples_springtime.7.d
	flavor = peoples_springtime.7.f

	duration = 3

	immediate = {
		random_interest_group = {
			limit = {
				is_in_government = yes
				OR = {
					bpm_ig_is_radical_left = yes
					leader = { bpm_leader_is_radical_leftist = yes }
				}
			}
			save_scope_as = radical_ig
		}
	}

	option = {
		name = peoples_springtime.7.a
		add_modifier = {
			name = post_revolutionary_fervor
			months = normal_modifier_time
		}
		ig:ig_liberals = {
			bpm_remove_all_dop_ideologies = yes
			bpm_remove_all_gov_ideologies = yes
			add_ideology = ideology_dop_radical_democrat
			add_ideology = ideology_gov_liberal_republican
			bpm_reorder_ideologies = yes
			if = {
				limit = { owner = c:FRA }
				set_interest_group_name = ig_liberals
			}
		}
		ig:ig_conservatives = {
			bpm_remove_all_dop_ideologies = yes
			add_ideology = ideology_dop_moderate_democrat
			bpm_reorder_ideologies = yes
			if = {
				limit = { owner = c:FRA }
				set_interest_group_name = ig_orleanists
			}
		}
	}

	option = {
		name = peoples_springtime.7.b
		default_option = yes
		add_loyalists = {
			value = 0.1
		}
		ig:ig_liberals = {
			bpm_remove_all_dop_ideologies = yes
			bpm_remove_all_gov_ideologies = yes
			add_ideology = ideology_dop_radical_democrat
			add_ideology = ideology_gov_liberal_republican
			bpm_reorder_ideologies = yes
			if = {
				limit = { owner = c:FRA }
				set_interest_group_name = ig_liberals
			}
		}
		ig:ig_conservatives = {
			bpm_remove_all_dop_ideologies = yes
			add_ideology = ideology_dop_moderate_democrat
			bpm_reorder_ideologies = yes
			if = {
				limit = { owner = c:FRA }
				set_interest_group_name = ig_orleanists
			}
		}
	}
}

# The Revolution Vanquished
peoples_springtime.8 = {
	type = country_event

	event_image = {
		video = "middleeast_police_breaking_door"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.8.t
	desc = peoples_springtime.8.d
	flavor = peoples_springtime.8.f

	duration = 3

	option = {
		name = peoples_springtime.8.a
		add_modifier = {
			name = counter_revolutionary_fervor
			months = normal_modifier_time
		}
	}

	option = {
		name = peoples_springtime.8.b
		default_option = yes
		add_loyalists = {
			value = 0.1
		}
	}
}

# Austrosplosion chain starts
peoples_springtime.9 = {
	type = country_event

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.9.t
	desc = peoples_springtime.9.d

	duration = 3

	dlc = dlc_bpm

	option = {
		name = peoples_springtime.9.a #lmao no
		default_option = yes
		ai_chance = {
			base = 75
		}

		trigger_event = { 
			id = peoples_springtime.10
			days = 30
			popup = yes 
		}
	}

	option = {
		name = peoples_springtime.9.b #franticly negotiate
		ai_chance = {
			base = 25
		}

		custom_tooltip = {
			text = bpm_hungary_union
		}
		
		s:STATE_TRANSDANUBIA = {
			remove_homeland = cu:south_german
		}
		c:AUS = {
			activate_law = law_type:law_federated
		}
		
		hidden_effect = {
			create_country = {
				tag = HUN
				origin = c:AUS
				state = s:STATE_CENTRAL_HUNGARY.region_state:AUS
			}
			s:STATE_TRANSDANUBIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_BEKES.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_BANAT.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_DELVIDEK.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_WEST_SLOVAKIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_EAST_SLOVAKIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_NORTHERN_TRANSYLVANIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_SOUTHERN_TRANSYLVANIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_SLAVONIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			s:STATE_CROATIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
			
			every_country = {
				limit = { bpm_country_is_in_europe = yes }
				post_notification = bpm_1848_ausgleich
			}
		}
		create_diplomatic_pact = {
			country = c:HUN
			type = personal_union
		}
		trigger_event = { 
			id = peoples_springtime.11
			days = 120
			popup = yes 
		}
	}
}

# hun revolution
peoples_springtime.10 = {
	type = country_event

	event_image = {
		video = "europenorthamerica_political_extremism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.10.t
	desc = peoples_springtime.10.d
	flavor = peoples_springtime.10.f

	duration = 2

	dlc = dlc_bpm

	immediate = {
		set_variable = bpm_hungarian_revolution_started
		s:STATE_TRANSDANUBIA = {
				remove_homeland = cu:south_german
		}

		create_country = {
				tag = HUN
				origin = c:AUS
				state = s:STATE_CENTRAL_HUNGARY.region_state:AUS
		}

		s:STATE_TRANSDANUBIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
		s:STATE_BEKES.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
		s:STATE_BANAT.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
		s:STATE_DELVIDEK.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
		s:STATE_WEST_SLOVAKIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
		s:STATE_EAST_SLOVAKIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
		s:STATE_NORTHERN_TRANSYLVANIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
		s:STATE_SOUTHERN_TRANSYLVANIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}

		c:HUN = {
			activate_law = law_type:law_devolved
			activate_law = law_type:law_presidential_republic
			activate_law = law_type:law_elected_bureaucrats
			activate_law = law_type:law_census_voting
			activate_law = law_type:law_right_of_assembly
			activate_law = law_type:law_total_separation
			activate_law = law_type:law_cultural_exclusion
			activate_law = law_type:law_national_guard
			activate_law = law_type:law_per_capita_based_taxation
			activate_law = law_type:law_professional_army
			activate_law = law_type:law_professional_officers
		}
	}

	option = {
		name = peoples_springtime.10.a
		default_option = yes

		create_diplomatic_play = {
			name = hungarian_revolution
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_TRANSDANUBIA.region_state:HUN
		}
		random_diplomatic_play = {
				limit = {
					any_scope_play_involved = {
						c:HUN ?= this
					}
				}
				if = {
					limit = {
						exists = s:STATE_SLAVONIA.region_state:AUS 
					}
					add_war_goal = {
						holder = c:HUN
						type = conquer_state
						target_state = s:STATE_SLAVONIA.region_state:AUS
					}
				}
				if = {
					limit = {
						exists = s:STATE_CROATIA.region_state:AUS 
					}
					add_war_goal = {
						holder = c:HUN
						type = conquer_state
						target_state = s:STATE_CROATIA.region_state:AUS
					}
				}
		}
		hidden_effect = {
			change_infamy = -250
			trigger_event = { 
				id = peoples_springtime.11
				days = 90
				popup = yes 
			}
			every_country = {
				limit = { bpm_country_is_in_europe = yes }
				post_notification = bpm_1848_hungarian_revolution
			}
		}
	}
	option = {
		name = peoples_springtime.10.b
		trigger = { is_player = yes }

		play_as = c:HUN
	}
}

# milan revolution
peoples_springtime.11 = {
	type = country_event

	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.11.t
	desc = peoples_springtime.11.d
	flavor = peoples_springtime.11.f

	duration = 2

	dlc = dlc_bpm

	immediate = {
		create_country = {
			tag = LOM
			origin = c:AUS
			state = s:STATE_LOMBARDY.region_state:AUS
		}
		c:LOM = {
			activate_law = law_type:law_unitary
			activate_law = law_type:law_parliamentary_republic
			activate_law = law_type:law_elected_bureaucrats
			activate_law = law_type:law_universal_suffrage
		}
	}

	option = {
		name = peoples_springtime.11.a
		default_option = yes

		create_diplomatic_play = {
				name = milan_revolution
				type = dp_annex_war
				escalation = 50
				target_state = s:STATE_LOMBARDY.region_state:LOM
		}
		hidden_effect = {
			change_infamy = -250
			trigger_event = { 
				id = peoples_springtime.12
				days = 7
				popup = yes 
			}
			c:PAP ?= {
				trigger_event = { id = italian_springtime.1 days = 7 popup = yes}
			}
			every_country = {
				limit = { bpm_country_is_in_europe = yes }
				post_notification = bpm_1848_milan_revolution
			}
		}
	}
	option = {
		name = peoples_springtime.11.b
		trigger = { is_player = yes }

		play_as = c:LOM
	}
}

# san marco revolution
peoples_springtime.12 = {
	type = country_event

	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.12.t
	desc = peoples_springtime.12.d
	flavor = peoples_springtime.12.f

	duration = 2

	dlc = dlc_bpm

	immediate = {
		create_country = {
				tag = RSM
				origin = c:AUS
				state = s:STATE_VENETIA.region_state:AUS
		}
		c:RSM = {
			activate_law = law_type:law_unitary
			activate_law = law_type:law_parliamentary_republic
			activate_law = law_type:law_elected_bureaucrats
			activate_law = law_type:law_universal_suffrage
		}
	}

	option = {
		name = peoples_springtime.12.a
		default_option = yes
		random_diplomatic_play = {
			limit = {
				target = {
					c:LOM ?= this
				}
			}
			add_target_backers = { c:RSM }
			add_war_goal = {
				holder = c:AUS
				type = conquer_state
				target_state = s:STATE_VENETIA.region_state:RSM
				primary_demand = yes
			}
		}
		hidden_effect = {
			change_infamy = -250
			c:SAR ?= {
				trigger_event = {
					id = italian_springtime.5
					popup = yes 
				}
			}
		}
		hidden_effect = {
			every_country = {
				limit = { bpm_country_is_in_europe = yes }
				post_notification = bpm_1848_san_marco_revolution
			}
		}
	}
	option = {
		name = peoples_springtime.12.b
		trigger = { is_player = yes }

		play_as = c:RSM
	}
}

peoples_springtime.13 = {
	type = country_event

	event_image = {
		video = "europenorthamerica_capitalists_meeting"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.13.t
	desc = peoples_springtime.13.d
	flavor = peoples_springtime.13.f

	duration = 1

	dlc = dlc_bpm

	trigger = {
		has_variable = bpm_hungarian_revolution_started
		NOT = { has_variable = bpm_austria_empire_dissolved }
		NOT = { owns_entire_state_region = STATE_CENTRAL_HUNGARY }
		owner = {
			is_at_war = no
			is_diplomatic_play_initiator = no
		}
	}

	immediate = {
		create_country = {
			tag = GAL
			origin = c:AUS
			state = s:STATE_EAST_GALICIA.region_state:AUS
		}
		s:STATE_WEST_GALICIA.region_state:AUS = { set_state_owner = c:GAL set_state_type = incorporated}
		s:STATE_MOLDAVIA.region_state:AUS = { set_state_owner = c:GAL set_state_type = incorporated}
		set_variable = bpm_austria_empire_dissolved
		remove_variable = bpm_hungarian_revolution_started
	}

	option = {
		name = peoples_springtime.13.a #release galicia

		custom_tooltip = {
			text = bpm_gl_union
		}
		
		
		hidden_effect = {
			create_diplomatic_pact = {
				country = c:GAL
				type = personal_union
			}
		}
	}
}

peoples_springtime.14 = {
	type = country_event

	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.14.t
	desc = peoples_springtime.14.d
	flavor = peoples_springtime.14.f

	duration = 2

	dlc = dlc_bpm

	trigger = {
		#event
	}

	option = {
		name = peoples_springtime.14.a
		default_option = yes
	}
}

peoples_springtime.15 = {
	type = country_event

	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = peoples_springtime.15.t
	desc = peoples_springtime.15.d
	flavor = peoples_springtime.15.f

	duration = 2

	dlc = dlc_bpm

	trigger = {
		#event/pulse
		# has_global_variable = peoples_springtime_happening
		owner = {
			is_player = no
			this = c:AUS
			NOT = { has_law = law_type:law_monarchy }
			NOT = { has_variable = bpm_austria_empire_dissolved }
		}
	}

	option = {
		name = peoples_springtime.15.a
		default_option = yes
		
		hidden_effect = {
			set_variable = bpm_austria_empire_dissolved
			if = {
				limit = { NOT = { exists = c:HUN } }
					create_country = {
					tag = HUN
					origin = c:AUS
					state = s:STATE_CENTRAL_HUNGARY.region_state:AUS
				}
				s:STATE_TRANSDANUBIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_BEKES.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_BANAT.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_DELVIDEK.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_WEST_SLOVAKIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_EAST_SLOVAKIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_NORTHERN_TRANSYLVANIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_SOUTHERN_TRANSYLVANIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_SLAVONIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}
				s:STATE_CROATIA.region_state:AUS = { set_state_owner = c:HUN set_state_type = incorporated}

				c:HUN = {
					activate_law = law_type:law_devolved
					activate_law = law_type:law_presidential_republic
					activate_law = law_type:law_elected_bureaucrats
					activate_law = law_type:law_census_voting
					activate_law = law_type:law_right_of_assembly
					activate_law = law_type:law_total_separation
					activate_law = law_type:law_cultural_exclusion
					activate_law = law_type:law_national_guard
					activate_law = law_type:law_per_capita_based_taxation
					activate_law = law_type:law_professional_army
					activate_law = law_type:law_professional_officers
				}
			}
			if = {
				limit = { NOT = { exists = c:GAL } }
					create_country = {
						tag = GAL
						origin = c:AUS
						state = s:STATE_EAST_GALICIA.region_state:AUS
					}
				s:STATE_WEST_GALICIA.region_state:AUS = { set_state_owner = c:GAL set_state_type = incorporated}
				s:STATE_MOLDAVIA.region_state:AUS = { set_state_owner = c:GAL set_state_type = incorporated}
			}
			if = {
				limit = { NOT = { exists = c:GAL } }
					create_country = {
						tag = GAL
						origin = c:AUS
						state = s:STATE_EAST_GALICIA.region_state:AUS
					}
				s:STATE_WEST_GALICIA.region_state:AUS = { set_state_owner = c:GAL set_state_type = incorporated}
				s:STATE_MOLDAVIA.region_state:AUS = { set_state_owner = c:GAL set_state_type = incorporated}

				c:GAL = {
					activate_law = law_type:law_parliamentary_republic
					activate_law = law_type:law_elected_bureaucrats
					activate_law = law_type:law_census_voting
					activate_law = law_type:law_right_of_assembly
					activate_law = law_type:law_total_separation
					activate_law = law_type:law_cultural_exclusion
				}
			}
			if = {
				limit = { NOT = { exists = c:BOH } }
					create_country = {
						tag = BOH
						origin = c:AUS
						state = s:STATE_BOHEMIA.region_state:AUS
					}
				s:STATE_MORAVIA.region_state:AUS = { set_state_owner = c:BOH set_state_type = incorporated}

				c:BOH = {
					activate_law = law_type:law_parliamentary_republic
					activate_law = law_type:law_elected_bureaucrats
					activate_law = law_type:law_census_voting
					activate_law = law_type:law_right_of_assembly
					activate_law = law_type:law_total_separation
					activate_law = law_type:law_cultural_exclusion
				}
			}
			c:KRA = {
			remove_diplomatic_pact = {
				country = c:AUS
				type = puppet
			}			
		}
			
			# every_country = {
			# 	limit = { bpm_country_is_in_europe = yes }
			# 	post_notification = bpm_1848_ausgleich
			# }
		}
	}
}

peoples_springtime.100 = {
	type = country_event
	placement = root

	duration = 3

	title = peoples_springtime.100.t
	desc = peoples_springtime.100.d
	flavor = peoples_springtime.100.f

	category = revolution
	icon = "gfx/interface/icons/event_icons/event_protest.dds"
	event_image = {
		video = "europenorthamerica_springtime_of_nations"
	}

	cooldown = { months = normal_modifier_time }

	trigger = {
		OR = {
			socialist_revolution_ongoing = yes
			liberal_revolution_ongoing = yes
		}
		bpm_country_is_republic = no
		bpm_country_laws_ok_voting = no
		OR = {
			AND = {
				exists = c:PRU
				this = c:PRU
				# is_player = no
			}
			any_civil_war = {
				is_civil_war_type = revolution
				OR = {
					civil_war_progress >= 0.67
					AND = {
						civil_war_progress >= 0.30
						political_movement = {
							political_movement_radicalism >= 80
						}
					}
				}
			}
		}
		any_political_movement = {
			is_revolutionary_movement = yes
			NOR = {
				desired_law = law_type:law_chiefdom
				desired_law = law_type:law_monarchy
				desired_law = law_type:law_theocracy
				desired_law = law_type:law_council_republic
			}
		}
	}

	cancellation_trigger = {
		NOR = { 
			socialist_revolution_ongoing = yes 
			liberal_revolution_ongoing = yes
		}
	}
	
	immediate = {
		save_scope_as = revolution_country
		save_revolution_scopes = yes
		ruler = { save_scope_as = reforms_at_gunpoint_ruler }
		random_interest_group = {
			limit = { is_in_government = yes }
			save_scope_as = reforms_at_gunpoint_ig
		}
		scope:ongoing_revolution_movement = { 
			this.desired_law = { save_scope_as = revolutionaries_law }
		}
	}
	
	option = {
		name = peoples_springtime.100.a 
		ai_chance = {
			base = 100
		}
		trigger = {
			scope:revolutionaries_law = {
				is_same_law_group_as = law_type:law_wealth_voting
			}
			ruler = {
				NOR = {
					has_trait = imperious
					has_trait = arrogant
					has_trait = imposing
				}
			}	
		}
		scope:ongoing_revolution = {
			add_civil_war_progress = revolution_retreat_very_large
		}
		default_option = yes
		ROOT = {
			activate_law = scope:revolutionaries_law
			activate_law = law_type:law_total_separation
			if = {
				limit = { has_law = law_type:law_serfdom }
				activate_law = law_type:law_tenant_farmers
			}
			if = {
				limit = {
					any_political_movement = {
						is_revolutionary_movement = yes
						is_political_movement_type = movement_to_preserve
					}
				}
				cancel_enactment = yes
			}
		}
		add_loyalists = {
			value = medium_radicals
		}
		every_country = {
			limit = { bpm_country_is_in_europe = yes }
			post_notification = bpm_1848_concede_constitution
		}
		trigger_event = { id = peoples_springtime.101 days = 30 popup = yes }
	}

	option = {
		name = peoples_springtime.100.a
		ai_chance = {
			base = 100
		}
		trigger = {
			scope:revolutionaries_law = {
				is_same_law_group_as = law_type:law_monarchy
			}
			ruler = {
				NOR = {
					has_trait = imperious
					has_trait = arrogant
					has_trait = imposing
				}
			}
		}
		scope:ongoing_revolution = {
			add_civil_war_progress = revolution_retreat_very_large
		}
		default_option = yes
		ROOT = {
			if = {
				limit = { bpm_country_laws_no_voting = yes }
				activate_law = law_type:law_census_voting
			}
			else = {
				activate_law = law_type:law_universal_suffrage
			}
			activate_law = law_type:law_census_voting
			activate_law = law_type:law_total_separation
			if = {
				limit = { has_law = law_type:law_serfdom }
				activate_law = law_type:law_tenant_farmers
			}
		}
		add_loyalists = {
			value = large_radicals
		}
		every_country = {
			limit = { bpm_country_is_in_europe = yes }
			post_notification = bpm_1848_concede_constitution
		}
		trigger_event = { id = peoples_springtime.101 days = 30 popup = yes }
	}

	option = {
		name = peoples_springtime.100.a 
		ai_chance = {
			base = 100
		}
		trigger = {
			scope:revolutionaries_law = {
				NOR = {
					is_same_law_group_as = law_type:law_monarchy
					is_same_law_group_as = law_type:law_wealth_voting
				}
			}
			ruler = {
				NOR = {
					has_trait = imperious
					has_trait = arrogant
					has_trait = imposing
				}
			}	
		}
		scope:ongoing_revolution = {
			add_civil_war_progress = revolution_retreat_very_large
		}
		default_option = yes
		ROOT = {
			if = {
				limit = { bpm_country_laws_no_voting = yes }
				activate_law = law_type:law_wealth_voting
			}
			else = {
				activate_law = law_type:law_census_voting
			}
			activate_law = scope:revolutionaries_law
			if = {
				limit = {
					any_political_movement = {
						is_revolutionary_movement = yes
						is_political_movement_type = movement_to_preserve
					}
				}
				cancel_enactment = yes
			}
		}
		add_loyalists = {
			value = medium_radicals
		}
		every_country = {
			limit = { bpm_country_is_in_europe = yes }
			post_notification = bpm_1848_concede_constitution
		}
		trigger_event = { id = peoples_springtime.101 days = 30 popup = yes }
	}

	option = {
		name = peoples_springtime.100.b
		default_option = yes
		ai_chance = {
			base = 1
			modifier = {
				trigger = {
					ruler = {
						OR = {
							has_trait = honorable
							has_trait = tactful
							has_trait = trait_child
						}
					}
				}
				add = -20
			}
		}
		scope:ongoing_revolution = {
			add_civil_war_progress = revolution_advance_large
		}
		scope:ongoing_revolution_movement = {
			add_modifier = {
				name = modifier_movement_reforms_at_gunpoint_failed
				months = normal_modifier_time
			}
		}
		scope:reforms_at_gunpoint_ig = {
			add_modifier = {
				name = modifier_refused_advice
				months = normal_modifier_time
			}
		}
	}
}

peoples_springtime.101 = {
	type = country_event
	placement = root

	duration = 3
	
	dlc = dlc_bpm

	title = peoples_springtime.101.t
	desc = peoples_springtime.101.d
	flavor = peoples_springtime.101.f

	event_image = {
		video = "europenorthamerica_political_extremism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		# Wrap everything in owner since this event could be fired from law scope
		owner = {
			has_modifier = bpm_peoples_springtime_modifier
			NOT = { has_variable = completed_peoples_springtime_je }
			NOT = { has_variable = bpm_peoples_springtime_101_fired }
			OR = {
				any_interest_group = {
					is_in_government = yes
					OR = {
						bpm_ig_is_liberal = yes
						leader = { bpm_leader_is_liberal = yes }
					}
				}
				bpm_country_is_republic = yes
			}
		}
	}

	immediate = {
		owner = {
			set_variable = bpm_peoples_springtime_101_fired
		}
	}

	option = {
		name = peoples_springtime.101.a
		default_option = yes
		# Wrap everything in owner since this event could be fired from law scope
		owner = {
			add_loyalists = {
				value = 0.7
				strata = rich
			}
			add_loyalists = {
				value = 0.7
				strata = middle
			}
			trigger_event = { id = peoples_springtime.102 days = 30 popup = yes }
		}
	}
}

peoples_springtime.102 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc_bpm

	title = peoples_springtime.102.t
	desc = peoples_springtime.102.d
	flavor = peoples_springtime.102.f

	event_image = {
		video = "votp_cops_march"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		capital = {
			save_scope_as = capital_scope
		}
	}

	option = {
		name = peoples_springtime.102.a
		default_option = yes

		owner = {
			if = {
				limit = { has_law = law_type:law_no_home_affairs }
				activate_law = law_type:law_national_guard
			}
			if = {
				limit = { NOT = { has_law = law_type:law_outlawed_dissent } }
				activate_law = law_type:law_censorship
			}
			add_loyalists = {
				value = 0.25
				strata = poor
			}
			every_scope_character = {
				limit = {
					has_role = agitator
					OR = {
						interest_group = { bpm_ig_is_radical_left = yes }
						bpm_leader_is_radical_leftist = yes
					}
				}
				exile_character = yes
			}
			hidden_effect = {
				set_variable = completed_peoples_springtime_je
				remove_modifier = bpm_pre_peoples_springtime
				remove_modifier = bpm_peoples_springtime_modifier
				every_interest_group = {
					remove_modifier = bpm_1848_stubborn_ig
				}
			}
		}
	}
}
