je_bpm_christian_democrats = {
	icon = "gfx/interface/icons/invention_icons/corporatism.dds"

	group = bpm_je_group_global

	is_shown_when_inactive = {
		hidden_trigger = {
			NOT = { 
				has_global_variable = global_rerum_novarum_issued_var
			}
		}
	}

	immediate = {
		#set_global_variable = {
		#	name = je_christian_democracy_progress
		#	value = 0
		#}
	}

	possible = {
		#custom_tooltip = {
		#	text = "Country is in Europe"
		#	bpm_country_is_in_europe = yes
		#}
		custom_tooltip = {
			text = "bpm_first_intl_happened"
			has_global_variable = first_intl_chain_complete_var
			has_global_variable = je_christian_democracy_progress
		}
		has_global_variable = je_christian_democracy_progress
		#hidden_trigger = {
		#	NOT = {
		#		has_global_variable = global_rerum_novarum_issued_var
		#	}
		#}
		any_country = {
			country_rank = rank_value:great_power
			bpm_country_is_in_europe = yes
			#NOT = {
			#	OR = {
			#		this = c:TUR
			#		this = c:RUS
			#	}
			#}
			has_technology_researched = corporatism
		}
	}

	invalid = {
		hidden_trigger = {
			has_global_variable = global_rerum_novarum_issued_var
		}
	}

	complete = {
		trigger_if = {
			limit = { has_global_variable = je_christian_democracy_progress }
			custom_tooltip = {
				text = "bpm_je_progress_complete"
				global_var:je_christian_democracy_progress >= 100
			}
		}
		#custom_tooltip = {
		#	text = "bpm_je_progress_complete"
		#	global_var:je_christian_democracy_progress >= 100
		#}
		#hidden_trigger = {
		#	NOT = {
		#		has_global_variable = global_rerum_novarum_issued_var
		#	}
		#}
	}

	on_complete = {
		set_global_variable = global_rerum_novarum_issued_var
		
		owner = {
			post_notification = bpm_rerum_novarum
		}

		trigger_event = {
			id = bpm_christdem_split.2
		}
	}
	
	progressbar = yes
	
	current_value = {
		value = global_var:je_christian_democracy_progress
	}

	goal_add_value = {
		add = 100
		max = 100
	}

	weight = 150

	should_be_pinned_by_default = yes
}

je_bpm_christian_or_democrat = {
	icon = "gfx/interface/icons/event_icons/church_and_state.dds"

	group = je_group_crises

	scripted_progress_bar = je_bpm_split_christdem_progress_bar
	scripted_progress_bar = je_bpm_christian_democrat_ideology_progress_bar
	scripted_progress_bar = je_bpm_christian_democrats_economy_progress_bar
	scripted_progress_bar = je_bpm_christian_democrats_welfare_progress_bar

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_frankfurt_finalizing
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
					has_global_variable = bpm_frankfurt_parliament_speech_law_chosen
					has_global_variable = bpm_frankfurt_parliament_centralization_law_chosen
					has_global_variable = bpm_frankfurt_parliament_bohemia_status
					has_global_variable = bpm_frankfurt_parliament_voting_law_chosen
					OR = { 
						has_global_variable = bpm_frankfurt_parliament_lesser_germany
						has_global_variable = bpm_frankfurt_parliament_greater_germany
					}
					has_global_variable = bpm_frankfurt_parliament_hog_law_chosen
					OR = { 
						has_global_variable = bpm_frankfurt_parliament_radical_win
						has_global_variable = bpm_frankfurt_parliament_moderate_win
					}
				}
			}
			triggered_desc = {
				desc = je_frankfurt_hos
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
					has_global_variable = bpm_frankfurt_parliament_speech_law_chosen
					has_global_variable = bpm_frankfurt_parliament_centralization_law_chosen
					has_global_variable = bpm_frankfurt_parliament_bohemia_status
					has_global_variable = bpm_frankfurt_parliament_voting_law_chosen
					OR = { 
						has_global_variable = bpm_frankfurt_parliament_lesser_germany
						has_global_variable = bpm_frankfurt_parliament_greater_germany
					}
					has_global_variable = bpm_frankfurt_parliament_hog_law_chosen
				}
			}
			triggered_desc = {
				desc = je_frankfurt_hog
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
					has_global_variable = bpm_frankfurt_parliament_speech_law_chosen
					has_global_variable = bpm_frankfurt_parliament_centralization_law_chosen
					has_global_variable = bpm_frankfurt_parliament_bohemia_status
					has_global_variable = bpm_frankfurt_parliament_voting_law_chosen
					OR = { 
						has_global_variable = bpm_frankfurt_parliament_lesser_germany
						has_global_variable = bpm_frankfurt_parliament_greater_germany
					}
				}
			}
			triggered_desc = {
				desc = je_frankfurt_reich
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
					has_global_variable = bpm_frankfurt_parliament_speech_law_chosen
					has_global_variable = bpm_frankfurt_parliament_centralization_law_chosen
					has_global_variable = bpm_frankfurt_parliament_bohemia_status
					has_global_variable = bpm_frankfurt_parliament_voting_law_chosen

				}
			}
			triggered_desc = {
				desc = je_frankfurt_voting
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
					has_global_variable = bpm_frankfurt_parliament_speech_law_chosen
					has_global_variable = bpm_frankfurt_parliament_centralization_law_chosen
					has_global_variable = bpm_frankfurt_parliament_bohemia_status
				}
			}
			triggered_desc = {
				desc = je_frankfurt_bohemia
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
					has_global_variable = bpm_frankfurt_parliament_speech_law_chosen
					has_global_variable = bpm_frankfurt_parliament_centralization_law_chosen
				}
			}
			triggered_desc = {
				desc = je_frankfurt_autonomy
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
					has_global_variable = bpm_frankfurt_parliament_speech_law_chosen
				}
			}
			triggered_desc = {
				desc = je_frankfurt_speech
				trigger = {
					has_global_variable = bpm_frankfurt_parliament_religious_law_chosen
				}
			}
			triggered_desc = {
				desc = je_debating_the_state_stance
				trigger = {
					NOT = { 
						has_variable = christdem_has_finalized_state_stance	
					}
				}
			}
		}
	}

	is_shown_when_inactive = {
		always = yes
		# OR = {
		# 	country_has_primary_culture = cu:north_german
		# 	country_has_primary_culture = cu:south_german
		# }
		# NOT = { this ?= c:UBD }
	}

	possible = {
		always = yes
		# has_journal_entry = je_springtime_of_the_peoples
		# OR = {
		#	country_has_primary_culture = cu:north_german
		#	country_has_primary_culture = cu:south_german
		#}
		# NOT = { this ?= c:UBD }
		# exists = c:PRU
	}

	immediate = {
		#if = {
		#	limit = {
		#		OR = {
		#			country_has_primary_culture = cu:north_german
		#			country_has_primary_culture = cu:south_german
		#		}
		#	}
		#	set_global_variable = {
		#		name = bpm_frankfurt_parliament_progress
		#		value = 0
		#	}
		#	bpm_calculate_frankfurt_parliament_seats = yes
		#
		#	c:LUX = {
		#		if = {
		#			limit = { is_subject = yes }
		#			set_variable = boycotting_frankfurt
		#		}
		#	}
		#	c:SCH = {
		#		if = {
		#			limit = { is_subject = yes }
		#			set_variable = boycotting_frankfurt
		#		}
		#	}
		#	c:HOL = {
		#		if = {
		#			limit = { is_subject = yes }
		#			set_variable = boycotting_frankfurt
		#		}
		#	}
		#	# c:UBD = {
		#	# 	if = {
		#	# 		limit = { is_subject = yes }
		#	# 		set_variable = boycotting_frankfurt
		#	# 	}
		#	# }
		#}

		#every_country = {
		#	limit = {
		#		OR = {
		#			country_has_primary_culture = cu:north_german
		#			country_has_primary_culture = cu:south_german
		#		}
		#		NOT = { has_variable = boycotting_frankfurt }
		#	}
		#	add_to_global_variable_list = {name = frankfurt_participant target = THIS}
		#}

		# trigger_event = { id = bpm_frankfurt_parliament_events.200 }
	}

	#scripted_button = je_frankfurt_button
	#scripted_button = je_frankfurt_boycott_button

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						country_has_primary_culture = cu:north_german
						country_has_primary_culture = cu:south_german
					}
				}
				bpm_calculate_frankfurt_parliament_seats = yes
			}
		}
		events = {
			bpm_frankfurt_parliament_events.1
			bpm_frankfurt_parliament_events.2
			bpm_frankfurt_parliament_events.3
			bpm_frankfurt_parliament_events.4
			bpm_frankfurt_parliament_events.5
			bpm_frankfurt_parliament_events.6
			bpm_frankfurt_parliament_events.7
			bpm_frankfurt_parliament_events.8
			bpm_frankfurt_parliament_events.23
		}
	}

	on_monthly_pulse = {
		effect = {
			change_global_variable = {
				name = bpm_frankfurt_parliament_progress
				add = {
					value = 7.5
					multiply = global_var:bpm_frankfurt_parliament_left_percent
				}
				add = {
					value = 3
					multiply = global_var:bpm_frankfurt_parliament_center_percent
				}
				add = {
					value = 0.33
					multiply = global_var:bpm_frankfurt_parliament_right_percent
				}
			}
			every_country = {
				limit = {
					OR = {
						country_has_primary_culture = cu:north_german
						country_has_primary_culture = cu:south_german
					}
					NOT = { has_variable = boycotting_frankfurt }
				}
				add_to_global_variable_list = {name = frankfurt_member_list target = THIS }
			}
		}
		random_events = {
			20 = 0
			10 = bpm_frankfurt_parliament_events.20
			10 = bpm_frankfurt_parliament_events.21
			10 = bpm_frankfurt_parliament_events.22
			5 = bpm_frankfurt_parliament_events.25
			20 = bpm_frankfurt_parliament_events.28
			5 = bpm_frankfurt_parliament_events.29
		}
	}

	fail = {
		custom_tooltip ={
			text = frankfurt_fail_tt
			OR = {
				has_global_variable = peoples_springtime_happened
				has_global_variable = frankfurt_dissolved
			}
			NOT = {
				has_global_variable = bpm_frankfurt_complete
				has_global_variable = bpm_frankfurt_war
			}
		}
	}

	on_fail = {
		trigger_event = { id = bpm_frankfurt_parliament_events.11 }
	}

	complete = {
		custom_tooltip ={
			text = frankfurt_win_tt
			has_global_variable = bpm_frankfurt_complete
		}
	}

	on_complete = {
		trigger_event = {
			id = bpm_christdem_split.3
		}
	}

	# on_complete = {
	# 	random_country = {
	# 		limit = { has_variable = frankfurt_leader }
	# 		trigger_event = { id = bpm_frankfurt_parliament_events.13 }
	# 	}
	# }

	# invalid = {
	# 	has_variable = completed_peoples_springtime_je
	# }

	#progressbar = yes

	#current_value = {
	#	value = local_var:local_christdem_evolution_var
	#}

	#goal_add_value = {
	#	add = 100
	#	max = 100
	#}

	weight = 10000
	should_be_pinned_by_default = yes
}