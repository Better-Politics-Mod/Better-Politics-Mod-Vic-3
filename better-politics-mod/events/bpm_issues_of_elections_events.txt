namespace = bpm_issues_of_elections

# Attack on issue
bpm_issues_of_elections.1 = {
	type = country_event
	placement = root
	title = bpm_issues_of_elections.1.t
	desc = bpm_issues_of_elections.1.d
	flavor = bpm_issues_of_elections.1.f

	dlc = dlc_bpm

	duration = 3

	gui_window = event_window_highlander


    icon = "gfx/interface/icons/event_icons/event_election.dds"

	event_image = {
		video = "southamerica_election"
	}

	left_icon = scope:first_party_leader
	right_icon = scope:second_party_leader

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	trigger = {
		any_in_list = {
			variable = bpm_country_issues
		}
	}

	immediate = {
		random_in_list = {
			variable = bpm_country_issues
			save_scope_as = bpm_selected_issue
		}

		set_variable = {
			name = bpm_current_target_issue
			value = scope:bpm_selected_issue
		}

		random_active_party = {
			save_scope_as = first_party
			ordered_member = {
				order_by = ig_clout
				position = 0
				leader = {
					save_scope_as = first_party_leader
				}
			}
		}
		random_active_party = {
			limit = {
				NOT = {
					this = scope:first_party_leader.interest_group_type.party
				}
			}
			save_scope_as = second_party
			ordered_member = {
				order_by = ig_clout
				position = 0
				leader = {
					save_scope_as = second_party_leader
				}
			}
		}
	}

	option = {
		name = bpm_issues_of_elections.1.a
		custom_tooltip = bpm_issue_relevance_up_tt
		scope:first_party = {
			add_momentum = 0.2
		}
		scope:second_party = {
			add_momentum = -0.1
		}
	}

	option = {
		name = bpm_issues_of_elections.1.b
		custom_tooltip = bpm_issue_relevance_very_up_tt
		custom_tooltip = bpm_issues_of_elections.1.b_tt
		scope:second_party = {
			add_momentum = -0.3
		}
	}
}