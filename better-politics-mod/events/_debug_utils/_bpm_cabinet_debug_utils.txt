namespace = BPM_CAB_DEBUG_UTILS

BPM_CAB_DEBUG_UTILS.1 = {
	type = country_event
	placement = ROOT
	
	title = BPM_CAB_DEBUG_UTILS.1.t
	desc = BPM_CAB_DEBUG_UTILS.1.d
	#flavor = 1834_additional_act.1.f
	
	event_image = {
		video = "votp_monarch_holding_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	duration = 3
	
	trigger = {
	}

	immediate = {
		random_scope_character = {
            limit = {
                exists = interest_group
                interest_group = {
                    bpm_ig_enabled = yes
                }
            }
            set_variable = bpm_cabinet_minister
            save_scope_as = ranchar
        }

        set_variable = {
            name = bpm_is_institution_schools
            
            value = scope:ranchar
        }

        random_scope_character = {
            limit = {
                exists = interest_group
                interest_group = {
                    bpm_ig_enabled = yes
                }
            }
            set_variable = bpm_cabinet_minister
            save_scope_as = ranchar
        }

        set_variable = {
            name = bpm_is_institution_centralization
            value = scope:ranchar
        }

        while = {
            limit = {
                trigger_if = {
                    limit = {
                        has_variable_list = bpm_CAB_char_select_pool
                    }
                    variable_list_size = {
                        name = bpm_CAB_char_select_pool
                        value < 5
                    }
                }
                trigger_else = {
                    always = yes
                }

            }

            random_scope_character = {
                limit = {
                    exists = interest_group
                    interest_group = {
                        bpm_ig_enabled = yes
                    }
                }
                save_scope_as = ranchar
            }
            add_to_variable_list = {
                name = bpm_CAB_char_select_pool
                target = scope:ranchar
            }
        }

        set_variable = bpm_has_cabinet
	}

    option = {
        name = BPM_CAB_DEBUG_UTILS.1.a
    }
}