namespace = bpm_christdem_split
namespace = bpm_reactionaries_split

bpm_christdem_split.1 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	title = bpm_christdem_split.1.t
	desc = bpm_christdem_split.1.d
	flavor = bpm_christdem_split.1.f
	duration = 3

	dlc = dlc_bpm

	cancellation_trigger = {
		has_local_variable = local_christdem_split_var
	}

	immediate = {
		set_local_variable = local_christdem_split_var
		
		bpm_initialize_catholic_interests = yes
	}

	option = {
		name = bpm_christdem_split.1.a
		default_option = yes
	}
}

bpm_christdem_split.2 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	title = bpm_christdem_split.2.t
	desc = bpm_christdem_split.2.d
	flavor = bpm_christdem_split.2.f
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		if = {
			limit = {
				NOT = {
					has_local_variable = local_christdem_split_var
				}
			}
			set_local_variable = local_christdem_split_var
		}
		
		bpm_initialize_christdems = yes
	}

	option = {
		name = bpm_christdem_split.2.a
		default_option = yes
	}

	option = {
		name = bpm_christdem_split.2.b

		trigger = {
			always = no
		}

		custom_tooltip = {
			text = bpm_movement_splits_christdems_tt
		}
        ig:ig_christian_democrats = {
            add_modifier = {
                name = bpm_ig_gaining_support
                multiplier = 2
                months = normal_modifier_time
            }
        }
	}
	
	option = {
		name = bpm_christdem_split.2.c

		trigger = {
			always = no
		}

		custom_tooltip = {
			text = bpm_movement_splits_christdems_tt
		}
	}
}

bpm_christdem_split.3 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/southamerica_factory_opening.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	title = bpm_christdem_split.3.t
	desc = bpm_christdem_split.3.d
	flavor = bpm_christdem_split.3.f
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		
	}

	option = {
		name = bpm_christdem_split.3.a
		default_option = yes
	}
}

################ State power and decentralisation

bpm_christdem_split.4 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/southamerica_election.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	title = bpm_christdem_split.4.t
	desc = bpm_christdem_split.4.desc
	flavor = bpm_christdem_split.4.f
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		
	}

	after = {
		change_variable = { name = var_christian_democrats_evolved add = 1 }
		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_reorder_ideologies = yes
			}
		}
	}

	option = {
		name = bpm_christdem_split.4.a

		default_option = yes

		custom_tooltip = {
			text = option_retain_regionalized_state_tt
			if = {
				limit = {
					NOT = {
						has_ideology = ideology_sta_regionalized_state
					}
				}
				bpm_remove_all_sta_ideologies = yes
				ig:ig_christian_democrats = {
					add_ideology = ideology_sta_regionalized_state
				}
			}
		}
	}

	option = {
		name = bpm_christdem_split.4.b

		ig:ig_christian_democrats = {
			add_ideology = ideology_sta_federated_state
		}
	}

	option = {
		name = bpm_christdem_split.4.c

		highlighted_option = yes
		trigger = {
			OR = {
				#custom_tooltip = {
				#	text = reactionary_movement_support_radicalism_tt
				#	OR = {
				#		var:bpm_reactionary_movement.political_movement_support >= 0.1
				#		var:bpm_reactionary_movement.political_movement_radicalism >= 0.2
				#	}
				#}
				custom_tooltip = {
					text = liberal_nationalist_movement_support_radicalism_tt
					OR = {
						var:bpm_national_liberal_movement.political_movement_support >= 0.1
						var:bpm_national_liberal_movement.political_movement_radicalism >= 0.3
					}
				}
				any_interest_group = {
					OR = {
						has_ideology = ideology:ideology_rel_moralist
						has_ideology = ideology:ideology_sta_powerful_state
						has_ideology = ideology:ideology_sta_security_state
					}
					is_powerful = yes
				}
				always = yes
			}
		}

		ig:ig_christian_democrats = {
			add_ideology = ideology_sta_powerful_state
		}
	}
}

bpm_christdem_split.5 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/southamerica_factory_opening.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	title = bpm_christdem_split.5.t
	desc = {
		triggered_desc = {
			desc = bpm_christdem_split.5.d1
			trigger = {

			}
		}
		triggered_desc = {
			desc = bpm_christdem_split.5.d2
			trigger = {
				#pop_type_percent_country = {
				#	pop_type = peasants
				#	percent < 0.35
				#}
			}
		}
	}
	flavor = bpm_christdem_split.5.f
	
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		
	}

	after = {
		change_variable = { name = var_christian_democrats_evolved add = 1 }
		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_reorder_ideologies = yes
			}
		}
	}

	option = {
		name = bpm_christdem_split.5.a

		default_option = yes

		highlighted_option = yes
		trigger = {
			#custom_tooltip = {
			#	text = economical_leaning_distributist_tt
			#	je:je_bpm_christian_or_democrat ?= {
			#		"scripted_bar_progress(je_bpm_christian_democrats_economy_progress_bar)" <= 20
			#	}
			#}
			
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_eco_ideologies = yes
			}
			add_ideology = ideology_eco_distrubitist
		}
	}

	option = {
		name = bpm_christdem_split.5.b

		highlighted_option = yes

		trigger = {
			custom_tooltip = {
				text = economical_leaning_interventionist_tt
				je:je_bpm_christian_or_democrat ?= { 
					"scripted_bar_progress(je_bpm_christian_democrats_economy_progress_bar)" >= 15
					"scripted_bar_progress(je_bpm_christian_democrats_economy_progress_bar)" <= 85
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_eco_ideologies = yes
			}
			add_ideology = ideology_eco_modern_interventionist
		}
	}

	option = {
		name = bpm_christdem_split.5.c

		trigger = {
			custom_tooltip = {
				text = socialised_economy_tt
				"scripted_bar_progress(je_bpm_christian_democrats_economy_progress_bar)" >= 80
			}
		}

		highlighted_option = yes

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_eco_ideologies = yes
			}
			add_ideology = ideology_eco_socialised_economy
		}
	}

	option = {
		name = bpm_christdem_split.5.d

		trigger = {
			OR = {
				pop_type_percent_country = {
					pop_type = peasants
					percent >= 0.30
				}
				country_rank < rank_value:major_power 
			}
		}

		highlighted_option = yes

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_eco_ideologies = yes
			}
			add_ideology = ideology_eco_modern_agrarian
		}
	}
}

#################################
########### Religion Stance Debate

bpm_christdem_split.6 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/southamerica_christianity.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	title = bpm_christdem_split.6.t
	desc = {
		triggered_desc = {
			desc = bpm_christdem_split.6.d1
			trigger = {

			}
		}
	}
	flavor = bpm_christdem_split.6.f
	
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		
	}

	after = {
		change_variable = { name = var_christian_democrats_evolved add = 1 }
		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_reorder_ideologies = yes
			}
		}
	}

	option = {
		name = bpm_christdem_split.6.a

		default_option = yes

		highlighted_option = yes
		trigger = {
			country_has_state_religion = rel:catholic
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_rel_ideologies = yes
			}
			add_ideology = ideology_rel_moralist
		}
	}

	option = {
		name = bpm_christdem_split.6.b

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = democracy_leaning_christian_democrat_tt
				je:je_bpm_christian_or_democrat ?= {
					"scripted_bar_progress(je_bpm_christian_democrat_ideology_progress_bar)" >= 66
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_rel_ideologies = yes
			}
			add_ideology = ideology_rel_humane_moralist
		}
	}

	option = {
		name = bpm_christdem_split.6.c

		highlighted_option = yes
		trigger = {
			NOT = {
				country_has_state_religion = rel:catholic
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_rel_ideologies = yes
			}
			add_ideology = ideology_rel_pragmatic_moralist
		}
	}
}

#################################
########### Welfare Stance Debate

bpm_christdem_split.7 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/europenorthamerica_rich_and_poor.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	title = bpm_christdem_split.7.t
	desc = {
		triggered_desc = {
			desc = bpm_christdem_split.7.d1
			trigger = {

			}
		}
	}
	flavor = bpm_christdem_split.7.f
	
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		
	}

	after = {
		change_variable = { name = var_christian_democrats_evolved add = 1 }
		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_reorder_ideologies = yes
			}
		}
	}

	option = {
		name = bpm_christdem_split.7.a

		default_option = yes

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = welfare_leaning_society_welfare_tt
				je:je_bpm_christian_or_democrat ?= {
					"scripted_bar_progress(je_bpm_christian_democrats_welfare_progress_bar)" <= 25
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_wel_ideologies = yes
			}
			add_ideology = ideology_wel_religious_welfare
		}
	}

	option = {
		name = bpm_christdem_split.7.b

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = welfare_leaning_central_welfare_tt
				je:je_bpm_christian_or_democrat ?= {
					"scripted_bar_progress(je_bpm_christian_democrats_welfare_progress_bar)" >= 20
					"scripted_bar_progress(je_bpm_christian_democrats_welfare_progress_bar)" <= 80
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_wel_ideologies = yes
			}
			add_ideology = ideology_wel_modern_paternalistic
		}
	}

	option = {
		name = bpm_christdem_split.7.c

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = welfare_leaning_state_welfare_tt
				je:je_bpm_christian_or_democrat ?= {
					"scripted_bar_progress(je_bpm_christian_democrats_welfare_progress_bar)" >= 75
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_wel_ideologies = yes
			}
			add_ideology = ideology_wel_expanded_public_welfare
		}
	}
}

#################################
########### Nationalism Stance Debate

bpm_christdem_split.8 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/southamerica_christianity.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	title = bpm_christdem_split.8.t
	desc = bpm_christdem_split.8.desc
	flavor = bpm_christdem_split.8.f
	
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		
	}

	after = {
		change_variable = { name = var_christian_democrats_evolved add = 1 }
		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_reorder_ideologies = yes
			}
		}
	}

	option = { #### Internationalism
		name = bpm_christdem_split.8.a

		default_option = yes

		highlighted_option = yes
		trigger = {
			
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_cit_christian_internationalist
		}
	}

	option = { #### Imigrant Nationalism
		name = bpm_christdem_split.8.b

		default_option = yes

		highlighted_option = yes
		trigger = {
			bpm_country_is_in_new_world = yes
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_cit_immigrant_nationalist
		}
	}

	option = { # Multi-Ethnic nationalism (Poland, Austria, Hungary etc)
		name = bpm_christdem_split.8.c

		highlighted_option = yes
		trigger = {
			
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_cit_multiethnic_nationalist
		}
	}

	option = { # Liberal Nationalism (Almost all if not actually all)
		name = bpm_christdem_split.8.d

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_cit_liberal_nationalist
		}
	}

	option = { # Ethnonationalism? Defo lithuania and late CSP
		name = bpm_christdem_split.8.e

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = reactionary_movement_support_radicalism_tt
				OR = {
					var:bpm_reactionary_movement.political_movement_support >= 0.1
					var:bpm_reactionary_movement.political_movement_radicalism >= 0.2
				}
			}
			custom_tooltip = {
				text = liberal_nationalist_movement_support_radicalism_tt
				OR = {
					var:bpm_national_liberal_movement.political_movement_support >= 0.1
					var:bpm_national_liberal_movement.political_movement_radicalism >= 0.3
				}
			}
			any_interest_group = {
				OR = {
					has_ideology = ideology:ideology_cit_nationalist
					has_ideology = ideology:ideology_cit_ethnonationalist
				}
				is_powerful = yes
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_cit_ethnonationalist
		}
	}
}

bpm_christdem_split.9 = {
	type = country_event
	placement = root

	event_image = { video = "gfx/event_pictures/southamerica_christianity.bk2" }
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	title = bpm_christdem_split.9.t
	desc = bpm_christdem_split.9.desc
	flavor = bpm_christdem_split.9.f
	
	duration = 3

	dlc = dlc_bpm

	trigger = {
		
	}

	immediate = {
		
	}

	after = {
		change_variable = { name = var_christian_democrats_evolved add = 1 }
		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_reorder_ideologies = yes
			}
		}
	}

	option = { #### Christian Democrat
		name = bpm_christdem_split.9.a

		default_option = yes

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = democracy_leaning_christian_democrat_tt
				je:je_bpm_christian_or_democrat ?= {
					"scripted_bar_progress(je_bpm_christian_democrat_ideology_progress_bar)" >= 66
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_dop_christian_democrat
		}
	}

	option = { #### Divine Democrat
		name = bpm_christdem_split.9.b

		default_option = yes

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = democracy_leaning_divine_democrat_tt
				je:je_bpm_christian_or_democrat ?= {
					"scripted_bar_progress(je_bpm_christian_democrat_ideology_progress_bar)" >= 25
					"scripted_bar_progress(je_bpm_christian_democrat_ideology_progress_bar)" <= 75
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_dop_divine_democrat
		}
	}

	option = { #### Illiberal Democrat
		name = bpm_christdem_split.9.c

		highlighted_option = yes
		trigger = {
			custom_tooltip = {
				text = democracy_leaning_illiberal_democrat_tt
				je:je_bpm_christian_or_democrat ?= {
					"scripted_bar_progress(je_bpm_christian_democrat_ideology_progress_bar)" <= 33
				}
			}
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_dop_iliberal_democrat
		}
	}

	option = { # Corporatist Democrat
		name = bpm_christdem_split.9.d

		highlighted_option = yes

		trigger = {
			always = yes
		}

		ig:ig_christian_democrats = {
			hidden_effect = {
				bpm_remove_all_cit_ideologies = yes
			}
			add_ideology = ideology_dop_corporatist_democrat
		}
	}
}
