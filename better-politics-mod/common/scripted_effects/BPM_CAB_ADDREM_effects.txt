bpm_add_character_to_cabinet = {
    if = {
        limit = {
            owner = { 
                has_variable = bpm_cabinet_char_select
            }
        }
        set_variable = {
            name = bpm_cabinet_minister
            value = owner.var:bpm_cabinet_char_select
        }
        save_scope_value_as = {
            name = addrem
            value = yes
        }
        bpm_addrem_cabinet = yes
    }
}

bpm_remove_character_from_cabinet = {
    if = {
        limit = {
            has_variable = bpm_cabinet_minister
        }

        save_scope_value_as = {
            name = addrem
            value = no
        }
        bpm_addrem_cabinet = yes

        remove_variable = bpm_cabinet_minister

    }
}

# --CABGENSCRIPT_BASE--
# We cannot use another scripted effect
# because we can't call scripted effects
# from institution scope.
bpm_addrem_cabinet = {
    var:bpm_cabinet_minister ?= {
        if = {
            limit = {
                type = owner.institution:institution_schools.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_schools
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_schools
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_centralization.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_centralization
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_centralization
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_police.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_police
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_police
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_colonial_affairs.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_colonial_affairs
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_colonial_affairs
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_social_security.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_social_security
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_social_security
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_workplace_safety.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_workplace_safety
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_workplace_safety
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_health_system.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_health_system
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_health_system
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_home_affairs.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_home_affairs
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_home_affairs
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_suffrage.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_suffrage
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_suffrage
                }
            }
        }
        else_if = {
            limit = {
                type = owner.institution:institution_culture.type
            }
            owner = { 
                if = {
                    limit = {
                        scope:addrem = yes
                    }
                    set_variable = {
                        name = bpm_is_institution_culture
                        value = scope:actor
                    }
                }
                else = {
                    remove_variable = bpm_is_institution_culture
                }
            }
        }
    }
    owner = {
        bpm_reload_institution_modifiers = yes
    }
    
}