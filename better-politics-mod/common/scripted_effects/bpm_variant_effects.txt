bpm_update_variants = {
	if = {
		limit = {
			NOT = {
				THIS = c:USA
			}
		}
		bpm_update_liberal_variant = yes
		bpm_update_trade_unions_variant = yes
	}
}

bpm_update_liberal_variant = {
	ig:ig_liberals ?= {
		if = {
			limit = {
				has_variable = bpm_largest_faction
				var:bpm_largest_faction = {
					is_political_movement_type = movement_religious_majority
				}
			}
			bpm_stash_rel_ideology = yes
			add_ideology = ideology_rel_moralist
			bpm_reorder_ideologies = yes	
		}
		else = {
			bpm_unstash_rel_ideology = yes
			bpm_reorder_ideologies = yes	
		}
	}
}

bpm_update_trade_unions_variant = {
	ig:ig_trade_unions ?= {
		if = {
			limit = {
				has_variable = bpm_largest_faction
				var:bpm_largest_faction = {
					OR = { 
						is_political_movement_type = movement_religious_majority
						is_political_movement_type = movement_cultural_majority 
						is_political_movement_type = movement_national_liberal
					}
				}

			}
			if = {
				limit = { 
					NOT = { 
						has_variable = bpm_conservative_unions
					}
				}
				bpm_stash_sta_ideology = yes
				bpm_stash_dop_ideology = yes
				add_ideology = ideology_sta_powerful_state
				add_ideology = ideology_dop_authoritarian_democrat
				bpm_reorder_ideologies = yes	
	
				set_variable = bpm_conservative_unions
			}
		}
		else = {
			bpm_unstash_sta_ideology = yes
			bpm_unstash_dop_ideology = yes
			
			bpm_reorder_ideologies = yes	

			remove_variable = bpm_conservative_unions
		}
	}
}