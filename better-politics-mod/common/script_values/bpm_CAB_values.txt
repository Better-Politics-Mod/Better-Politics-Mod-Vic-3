bpm_cabpicks_actual_minus_expected = {
    value = bpm_expected_number_of_cabpicks

    subtract = var:bpm_number_of_cabpicks
}

bpm_expected_number_of_cabpicks = {
    value = 0

    if = {
        limit = {
            is_in_government = yes
        }
        owner = {
            # Expected number of cabinet picks from being in government
            # If there are 3 IGs in government and 7 cabinet positions, 
            # then the expected number of cabinet picks is 7/3 - 1 rounded down
            # which is 1
            add = {
                value = bpm_expected_cabpicks_number_from_government
                desc = "BPM_EXPECTED_CABPICKS_NUMBER_FROM_GOVERNMENT"
            }
        }
    }
}

bpm_expected_cabpicks_number_from_government = {
    value = 0 

    add = {
        value = bpm_number_of_institutitions
        divide = bpm_number_of_gov_igs
        floor = yes
        max = 2
    }
}

bpm_number_of_gov_igs = {
    value = 0

    every_interest_group = {
        limit = {
            is_in_government = yes
        }
        add = 1
    }
}

# -- Cabinet Register Institutions (7) --
bpm_number_of_institutitions = {
    value = 0

    if = {
        limit = {
            has_institution = institution_colonial_affairs
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_social_security
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_workplace_safety
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_schools
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_police
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_health_system
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_home_affairs
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_centralization
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_suffrage
        }
        add = 1
    }
    if = {
        limit = {
            has_institution = institution_culture
        }
        add = 1
    }

}