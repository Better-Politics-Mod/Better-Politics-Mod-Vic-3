namespace = liberalism

# Path to Liberalism: Completion
liberalism.1 = {
	type = country_event
	placement = root
	title = liberalism.1.t
	desc = liberalism.1.d
	flavor = liberalism.1.f

	duration = 3

	event_image = {
		video = "southamerica_election"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_election.dds"

	trigger = {
		# triggered by liberalism JE 1
	}

	immediate = {
		if = {
			limit = { ig:ig_liberals = { is_in_government = yes } }
			ig:ig_liberals.leader = { save_scope_as = liberal_leader }
		}
		else_if = {
			limit = { ig:ig_radicals = { is_in_government = yes } }
			ig:ig_radicals.leader = { save_scope_as = liberal_leader }
		}
		else_if = {
			limit = { ig:ig_market_liberals = { is_in_government = yes } }
			ig:ig_market_liberals.leader = { save_scope_as = liberal_leader }
		}
		else_if = {
			limit = { ig:ig_national_liberals = { is_in_government = yes } }
			ig:ig_national_liberals.leader = { save_scope_as = liberal_leader }
		}
		else = {
			random_interest_group = {
				limit = {
					is_in_government = yes
					bpm_ig_is_liberal = yes
				}
				leader = { save_scope_as = liberal_leader }
			}
		}
	}

	option = {
		name = liberalism.1.a
		default_option = yes
		scope:liberal_leader = {
			add_modifier = {
				name = liberal_trailblazer
				months = normal_modifier_time
			}
		}

		add_journal_entry = {
			type = je_liberalism_2
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_right_of_assembly
					has_law = law_type:law_protected_speech
				}
				OR = {
					has_law = law_type:law_freedom_of_conscience
					has_law = law_type:law_total_separation
				}
				any_scope_building = {
					is_building_type = building_university
					level >= 3
					occupancy > 0.9
				}
				any_scope_building = {
					is_building_type = building_arts_academy
					level >= 3
					occupancy > 0.9
				}
			}
			trigger_event = { id = liberalism.3 }
		}
		else = {
			add_journal_entry = {
				type = je_liberalism_3
			}
		}
		ig:ig_liberals = {
			bpm_remove_all_dop_ideologies = yes
			add_ideology = ideology_dop_radical_democrat
			bpm_reorder_ideologies = yes
		}
		ig:ig_conservatives = {
			bpm_remove_all_dop_ideologies = yes
			add_ideology = ideology_dop_moderate_democrat
			bpm_reorder_ideologies = yes
		}
	}
	option = {
		name = liberalism.1.b
		random_interest_group = {
			limit = {
				OR = {
					is_interest_group_type = ig_rural_folk
					is_interest_group_type = ig_intelligentsia
					is_interest_group_type = ig_industrialists
				}
				leader = {
					NOT = { has_ideology = ideology:ideology_radical }
					NOT = { this = scope:liberal_leader }
				}
			}
			leader = { set_ideology = ideology:ideology_radical }
		}

		add_journal_entry = {
			type = je_liberalism_2
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_right_of_assembly
					has_law = law_type:law_protected_speech
				}
				OR = {
					has_law = law_type:law_freedom_of_conscience
					has_law = law_type:law_total_separation
				}
				any_scope_building = {
					is_building_type = building_university
					level >= 3
					occupancy > 0.9
				}
				any_scope_building = {
					is_building_type = building_arts_academy
					level >= 3
					occupancy > 0.9
				}
			}
			trigger_event = { id = liberalism.3 }
		}
		else = {
			add_journal_entry = {
				type = je_liberalism_3
			}
		}
		ig:ig_conservatives = {
			bpm_remove_all_dop_ideologies = yes
			add_ideology = ideology_dop_moderate_democrat
			bpm_reorder_ideologies = yes
		}
		if = {
			limit = { ig:ig_reactionaries = { bpm_ig_is_anti_democratic = yes } }
			ig:ig_reactionaries = {
				bpm_remove_all_dop_ideologies = yes
				add_ideology = ideology_dop_authoritarian_democrat
				bpm_reorder_ideologies = yes
			}
		}
	}
	option = {
		name = liberalism.1.c
		random_interest_group = {
			limit = {
				OR = {
					is_interest_group_type = ig_rural_folk
					is_interest_group_type = ig_intelligentsia
					is_interest_group_type = ig_industrialists
					is_interest_group_type = ig_conservatives
					is_interest_group_type = ig_petty_bourgeoisie
					is_interest_group_type = ig_national_liberals
				}
				leader = {
					NOT = { has_ideology = ideology:ideology_reformer }
					NOT = { this = scope:liberal_leader }
				}
			}
			leader = { set_ideology = ideology:ideology_reformer }
		}

		add_journal_entry = {
			type = je_liberalism_2
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_right_of_assembly
					has_law = law_type:law_protected_speech
				}
				OR = {
					has_law = law_type:law_freedom_of_conscience
					has_law = law_type:law_total_separation
				}
				any_scope_building = {
					is_building_type = building_university
					level >= 3
					occupancy > 0.9
				}
				any_scope_building = {
					is_building_type = building_arts_academy
					level >= 3
					occupancy > 0.9
				}
			}
			trigger_event = { id = liberalism.3 }
		}
		else = {
			add_journal_entry = {
				type = je_liberalism_3
			}
		}
		ig:ig_conservatives = {
			bpm_remove_all_dop_ideologies = yes
			add_ideology = ideology_dop_moderate_democrat
			bpm_reorder_ideologies = yes
		}
	}
}

# Freedom of Trade: Completion
liberalism.2 = {
	type = country_event
	placement = root
	title = liberalism.2.t
	desc = liberalism.2.d
	flavor = liberalism.2.f

	duration = 3

	event_image = {
		video = "asia_farmers_market"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	trigger = {
		# triggered by liberalism JE 2
	}

	option = {
		name = liberalism.2.a
		add_modifier = {
			name = free_exports
			months = normal_modifier_time
		}
	}
	option = {
		name = liberalism.2.b
		default_option = yes
		add_modifier = {
			name = free_imports
			months = normal_modifier_time
		}
	}
}

# Freedom of Thought: Completion
liberalism.3 = {
	type = country_event
	placement = root
	title = liberalism.3.t
	desc = liberalism.3.d
	flavor = liberalism.3.f

	duration = 3

	event_image = {
		video = "unspecific_world_fair"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	trigger = {
		# triggered by liberalism JE 3
	}

	option = {
		name = liberalism.3.a
		add_modifier = {
			name = free_arts
			months = normal_modifier_time
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_freedom_of_conscience
					has_law = law_type:law_total_separation
				}
				has_law = law_type:law_slavery_banned
				has_law = law_type:law_multicultural
				has_law = law_type:law_no_migration_controls
				average_sol >= 12
			}
			trigger_event = { id = liberalism.4 }
		}
		else = {
			add_journal_entry = {
				type = je_liberalism_4
			}
		}
		ig:ig_liberals = {
			bpm_remove_all_sta_ideologies = yes
			add_ideology = ideology_sta_progressive_state
			bpm_reorder_ideologies = yes
		}
	}
	option = {
		name = liberalism.3.b
		default_option = yes
		add_modifier = {
			name = free_science
			months = normal_modifier_time
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_freedom_of_conscience
					has_law = law_type:law_total_separation
				}
				has_law = law_type:law_slavery_banned
				has_law = law_type:law_multicultural
				has_law = law_type:law_no_migration_controls
				average_sol >= 12
			}
			trigger_event = { id = liberalism.4 }
		}
		else = {
			add_journal_entry = {
				type = je_liberalism_4
			}
		}
		ig:ig_liberals = {
			bpm_remove_all_sta_ideologies = yes
			add_ideology = ideology_sta_progressive_state
			bpm_reorder_ideologies = yes
		}
	}
}

# The New Colossus: Completion
liberalism.4 = {
	type = country_event
	placement = root
	title = liberalism.4.t
	desc = liberalism.4.d
	flavor = liberalism.4.f

	duration = 3

	event_image = {
		video = "asia_poor_people_moving"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# triggered by liberalism JE 4
	}

	option = {
		name = liberalism.4.a
		add_modifier = {
			name = teeming_shore
		}
		ig:ig_liberals = {
			bpm_remove_all_cit_ideologies = yes
			add_ideology = ideology_cit_immigrant_nationalist
			bpm_reorder_ideologies = yes
		}
		ig:ig_radicals = {
			bpm_remove_all_cit_ideologies = yes
			add_ideology = ideology_cit_immigrant_nationalist
			bpm_reorder_ideologies = yes
		}
		ig:ig_industrialists = {
			bpm_remove_all_cit_ideologies = yes
			add_ideology = ideology_cit_immigrant_nationalist
			bpm_reorder_ideologies = yes
		}
		if = {
			limit = { NOT = { ig:ig_conservatives = { has_ideology = ideology:ideology_cit_immigrant_nationalist } } }
			ig:ig_conservatives = {
				bpm_remove_all_cit_ideologies = yes
				add_ideology = ideology_cit_liberal_nationalist
				bpm_reorder_ideologies = yes
			}
		}
	}
	option = {
		name = liberalism.4.b
		default_option = yes
		add_modifier = {
			name = new_colossus
			months = normal_modifier_time
		}
		ig:ig_liberals = {
			bpm_remove_all_cit_ideologies = yes
			add_ideology = ideology_cit_immigrant_nationalist
			bpm_reorder_ideologies = yes
		}
		ig:ig_radicals = {
			bpm_remove_all_cit_ideologies = yes
			add_ideology = ideology_cit_immigrant_nationalist
			bpm_reorder_ideologies = yes
		}
		ig:ig_industrialists = {
			bpm_remove_all_cit_ideologies = yes
			add_ideology = ideology_cit_immigrant_nationalist
			bpm_reorder_ideologies = yes
		}
		if = {
			limit = { NOT = { ig:ig_conservatives = { has_ideology = ideology:ideology_cit_immigrant_nationalist } } }
			ig:ig_conservatives = {
				bpm_remove_all_cit_ideologies = yes
				add_ideology = ideology_cit_liberal_nationalist
				bpm_reorder_ideologies = yes
			}
		}
	}
}