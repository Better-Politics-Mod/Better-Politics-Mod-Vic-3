bpm_total_government_clout = {
    value = 0
    every_interest_group = {
        limit = {
            is_in_government = yes
        }
        add = ig_clout
    }
}

bpm_relative_government_clout = {
    value = ig_clout
    divide = owner.bpm_total_government_clout
}

bpm_government_total_mandate_value = {
    value = 0
    if = {
        limit = { has_law = law_type:law_advisory_body }
        add = 100
    }
    else_if = {
        limit = { has_law = law_type:law_separated_powers }
        add = 80
    }
    else_if = {
        limit = { has_law = law_type:law_supreme_legislature }
        add = 60
    }
}

bpm_mandate_deserved = {
    value = 0
    owner = {
        add = bpm_government_total_mandate_value
    }
    multiply = ig_clout
    if = {
        limit = {
            owner = { has_law = law_type:law_appointed_by_hos }
            bpm_ig_is_institutional = yes
        }
        multiply = 1.25
    }
    else_if = {
        limit = {
            owner = { has_law = law_type:law_appointed_on_advice }
        }
        multiply = {
            value = ig_clout
            add = 1
            if = {
                limit = {
                    OR = {
                        bpm_ig_is_institutional = yes
                    }
                }
                add = 0.1
            }
        }
    }
    else_if = {
        limit = {
            owner = { has_law = law_type:law_answers_to_legislature }
            is_in_government = yes
        }
        multiply = {
            value = ig_clout
            multiply = 4
            add = 1
        }
    }
    else_if = {
        limit = {
            owner = { has_law = law_type:law_no_separate_hog }
            OR = {
                this = owner.ruler.interest_group
                AND = {
                    has_party = yes
                    owner.ruler.interest_group.has_party = yes
                    bpm_compare_eq = {LEFT_SIDE = this.party RIGHT_SIDE = owner.ruler.interest_group.party}
                    # Done this way because seemingly referencing party directly (even when we check for existence) will create errors in a script value
                    # so, we are offloading checks of existence into a scripted_trigger
                }
            }
        }
        multiply = 1.2
    }
    ceiling = yes
}

bpm_remaining_mandate = {
    value = var:bpm_ig_mandate
    subtract = var:bpm_ig_mandate_used
}

# -- Autogenerated -- #
bpm_cost_ig_position = {
    value = 5
    if = {
        limit = {
            owner.has_institution = institution_colonial_affairs
            owner.institution:institution_colonial_affairs.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_agrarian_populists
                is_interest_group_type = ig_fascists
                is_interest_group_type = ig_national_liberals
                is_interest_group_type = ig_reactionaries
                is_interest_group_type = ig_landowners
                is_interest_group_type = ig_rural_folk
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_social_security
            owner.institution:institution_social_security.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_reformist_socialists
                is_interest_group_type = ig_revolutionist_socialists
                is_interest_group_type = ig_socialists
                is_interest_group_type = ig_industrialists
                is_interest_group_type = ig_trade_unions
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_workplace_safety
            owner.institution:institution_workplace_safety.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_reformist_socialists
                is_interest_group_type = ig_revolutionist_socialists
                is_interest_group_type = ig_socialists
                is_interest_group_type = ig_trade_unions
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_schools
            owner.institution:institution_schools.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_reactionaries
                is_interest_group_type = ig_devout
                is_interest_group_type = ig_intelligentsia
                is_interest_group_type = ig_trade_unions
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_police
            owner.institution:institution_police.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_conservatives
                is_interest_group_type = ig_armed_forces
                is_interest_group_type = ig_petty_bourgeoisie
                is_interest_group_type = ig_intelligentsia
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_health_system
            owner.institution:institution_health_system.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_market_liberals
                is_interest_group_type = ig_reformist_socialists
                is_interest_group_type = ig_devout
                is_interest_group_type = ig_trade_unions
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_home_affairs
            owner.institution:institution_home_affairs.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_conservatives
                is_interest_group_type = ig_fascists
                is_interest_group_type = ig_liberals
                is_interest_group_type = ig_radicals
                is_interest_group_type = ig_petty_bourgeoisie
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_centralization
            owner.institution:institution_centralization.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_agrarian_populists
                is_interest_group_type = ig_revolutionist_socialists
                is_interest_group_type = ig_petty_bourgeoisie
                is_interest_group_type = ig_industrialists
                is_interest_group_type = ig_landowners
                is_interest_group_type = ig_rural_folk
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_suffrage
            owner.institution:institution_suffrage.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_conservatives
                is_interest_group_type = ig_liberals
                is_interest_group_type = ig_market_liberals
                is_interest_group_type = ig_radicals
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_culture
            owner.institution:institution_culture.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_radicals
                is_interest_group_type = ig_reactionaries
                is_interest_group_type = ig_devout
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_diplomacy
            owner.institution:institution_diplomacy.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_conservatives
                is_interest_group_type = ig_fascists
                is_interest_group_type = ig_national_liberals
                is_interest_group_type = ig_armed_forces
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
    if = {
        limit = {
            owner.has_institution = institution_economy
            owner.institution:institution_economy.type = scope:bpm_reference_institution_type
            OR = {
                is_interest_group_type = ig_liberals
                is_interest_group_type = ig_market_liberals
                is_interest_group_type = ig_national_liberals
                is_interest_group_type = ig_reformist_socialists
                is_interest_group_type = ig_industrialists
                is_interest_group_type = ig_intelligentsia
            }
        }
        subtract = {
            value = 3
            desc = bpm_ig_wants_position
        }
    }
}