on_monthly_pulse_country = {
    on_actions = {
        bpm_monthly_country_switcharoo
        bpm_appointed_headofgov_check
    }
}

on_monthly_pulse_character = {
    on_actions = {
        bpm_delete_if_useless
    }
}

on_law_activated = {
    on_actions = {
        bpm_ep_law_change
    }
}

bpm_monthly_country_switcharoo = {
    effect = {
        bpm_choose_hog = yes
        bpm_republic_switcharoo = yes
        bpm_update_sta_ideology = yes
    }
}

bpm_delete_if_useless = {
    effect = {
        if = {
            limit = {
                is_in_void = yes
                NAND = {
                    has_variable = bpm_cabinet_minister
                    owner.var:bpm_headofgov ?= THIS
                    owner.var:bpm_hog_heir ?= THIS
                }
            }
        }
    }
}

bpm_ep_law_change = {
    effect = {
        if = {
            limit = {
                owner = {
                    has_variable = bpm_appointed_headofgov
                }
            }
            var:bpm_headofgov ?= {
                remove_variable = bpm_headofgov_sticky
            }
        }
        owner = { 
            bpm_choose_hog = yes
        }
    }
}

bpm_appointed_headofgov_check = {
    effect = {
        if = {
            limit = {
                modifier:country_bpm_hog_top_advice = yes
            }
            var:bpm_headofgov ?= {
                if = {
                    limit = {
                        interest_group ?= {
                            is_powerful = no
                        }
                    }
                    bpm_unappoint_as_hog = yes
                }
            }
        }

        bpm_reload_interim_penalty = yes
    }
}