je_march_to_radicalism = {
	icon = "gfx/interface/icons/invention_icons/phrygian.dds"

	group = bpm_je_group_global

	is_shown_when_inactive = {
		has_global_variable = bpm_je_march_to_radicalism_progress
		country_is_in_europe = yes
	}

	#change this for the compatch
	possible = {
		has_global_variable = bpm_je_march_to_radicalism_progress
	}

	invalid = {
		hidden_trigger = { has_variable = march_to_radicalism_complete_local_var } # The people have already sprung
	}

	immediate = {
		
	}

	complete = {
		custom_tooltip = {
			text = "bpm_je_progress_complete"
			global_var:bpm_je_march_to_radicalism_progress >= 100
		}
	}

	progressbar = yes
	current_value = {
		value = global_var:bpm_je_march_to_radicalism_progress
	}

	goal_add_value = {
		add = 100
		max = 100
	}

	on_complete = {
		set_global_variable = {
			name = march_to_radicalism_complete_var
		}
		set_variable = {
			name = march_to_radicalism_complete_local_var
		}
		if = {
			limit = {
				country_is_in_europe = yes
			}
			add_journal_entry = {
				type = je_springtime_of_the_peoples
			}
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

je_springtime_of_the_peoples = {
	icon = "gfx/interface/icons/event_icons/48je.dds"

	group = je_group_crises

	immediate = {
		trigger_event = { id = 1848.4 }
	}

	on_timeout = {
		set_variable = {
			name = completed_peoples_stringtime
		}
		set_variable = {
			name = completed_peoples_stringtime_recent
			months = short_modifier_time
		}
		custom_tooltip = je_springtime_of_the_peoples_tt_3
		hidden_effect = {
			every_interest_group = {
				remove_modifier = bpm_1848_stubborn_ig
			}
			ig:ig_liberals = {
				leader = { set_ideology = ideology:ideology_center_leader }
			}
			every_interest_group = {
				limit = {
					bpm_ig_is_institutional = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_radical
							has_ideology = ideology:ideology_republican_leader
						}
					}
				}
				leader = { set_ideology = ideology:ideology_liberal_leader }
			}
			if = {
				limit = {
					any_interest_group = {
						is_in_government = yes
						OR = {
							bpm_ig_is_radical_left = yes
							leader = { bpm_leader_is_radical_leftist = yes }
						}
					}
					bpm_country_is_republic = yes
					OR = {
						has_law = law_type:law_wealth_voting
						has_law = law_type:law_census_voting
						has_law = law_type:law_universal_suffrage
					}
				}
				trigger_event = { id = peoples_springtime.7 }
			}
		}
		custom_tooltip = je_springtime_of_the_peoples_tt_4
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						any_interest_group = {
							OR = {
								bpm_ig_is_radical_left = yes
								leader = { bpm_leader_is_radical_leftist = yes }
							}
							is_marginal = no
						}
					}
				}
				trigger_event = { id = peoples_springtime.8 }
			}
		}
	}

	on_monthly_pulse = {
		events = {
			1848.5
			bpm_radlib_utils.5
			bpm_radlib_utils.6
		}
		random_events = {
			100 = 0
			10 = peoples_springtime.3
			10 = peoples_springtime.4
			10 = peoples_springtime.5
		}
		bpm_setup_country_stubbornness = yes
	}

	invalid = {
		has_global_variable = peoples_springtime_happened
	}

	weight = 10000
	should_be_pinned_by_default = yes

	transferable = no
	can_revolution_inherit = no

	timeout = 1600
}