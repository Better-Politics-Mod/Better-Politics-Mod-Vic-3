
bpm_make_into_agitator = {
	clicksound = "event:/SFX/DLC/1.3_ip1/UI/character_invite"

	potential = {
		is_in_exile_pool = no
		is_in_void = no
		owner ?= { is_player = yes }
		is_ruler = no
		is_heir = no
		has_role = politician
		NOT = { has_role = agitator }
		interest_group = {
			NOT = { has_ideology = ideology:ideology_nonexistent }
		}
	}

	show_requirements = yes

	possible = {
		owner = { is_player = yes }
		scope:actor = { empty_agitator_slots >= 1 }
		interest_group = {
			bpm_ig_is_ideological = yes
			is_insurrectionary = no
		}
		NOT = { has_ideology = ideology:ideology_moderate }
	}

	effect = {
		#hidden_effect = {
			if = {
				limit = {
					NOT = { has_role = agitator }
				}
				add_character_role = agitator
			}
			if = {
				limit = {
					has_role = general
				}
				remove_character_role = general
			}
			if = {
				limit = {
					has_role = admiral
				}
				remove_character_role = admiral
			}
			if = {
				limit = {
					has_role = politician
				}
				set_as_interest_group_leader = no
				# remove_as_interest_group_leader = yes
				remove_character_role = politician
			}
			hidden_effect = {
				exile_character = yes
				transfer_character = scope:actor
			}
		#}
	}

	cooldown = { months = normal_modifier_time }
	show_confirmation_box = yes

	ai_chance = {
		value = -50
	}
}

bpm_add_to_cabinet = {
	clicksound = "event:/SFX/DLC/1.3_ip1/UI/character_invite"
	potential = {
		save_temporary_scope_as = tempactor
		owner ?= { 
			has_variable = bpm_cabinet_char_select 
			is_target_in_variable_list = {
				name = bpm_CAB_char_select_pool		
				target = scope:tempactor
			}
		} 
	}

	show_requirements = yes

	possible = {
		custom_tooltip = {
			text = bpm_add_to_cabinet_tt
			always = yes
		}
	}

	effect = {
		custom_tooltip = {
			text = bpm_add_to_cabinet_effect_tt
			save_scope_as = actor
			owner ?= {
				remove_list_variable = {
					name = bpm_CAB_char_select_pool
					target = scope:actor
				}
			}
			bpm_add_character_to_cabinet = yes
		}

	}

	#cooldown = none, the cooldown is to remove the character from cabinet
	show_confirmation_box = no
}

bpm_remove_from_cabinet = {
	clicksound = "event:/SFX/DLC/1.3_ip1/UI/character_invite"
	potential = {
		has_variable = bpm_cabinet_minister
	}

	show_requirements = yes

	possible = {
		custom_tooltip = {
			text = bpm_remove_from_cabinet_tt
			always = yes
		}
		
	}

	effect = {
		custom_tooltip = {
			text = bpm_remove_from_cabinet_effect_tt
			bpm_remove_character_from_cabinet = yes
		}
		
	}

	cooldown = { months = 2 } #TODO: replace with removable cooldown based on elections

	#cooldown = none, the cooldown is to remove the character from cabinet
	show_confirmation_box = no
}