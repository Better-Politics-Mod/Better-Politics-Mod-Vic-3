namespace = bpm_socdem_utils

bpm_socdem_utils.1 = { # Make sure reformists become socdems
	type = country_event
	placement = root
	hidden = yes

	trigger = {
		has_global_variable = global_socialist_heroic_period
		OR = {
			has_law = law_type:law_universal_suffrage
			has_law = law_type:law_census_voting
		}
		any_interest_group = {
			has_ideology = ideology:ideology_ig_reformist_socialist
			is_in_government = yes
			is_powerful = yes
		}
	}

	immediate = {
		every_interest_group = {
			limit = {
				has_ideology = ideology:ideology_ig_reformist_socialist
			}
			remove_ideology = ideology_gov_moderate_proletarian
			remove_ideology = ideology_gov_radical_proletarian
			add_ideology = ideology_gov_liberal_republican
			remove_ideology = ideology_eco_proletarian_economy
			add_ideology = ideology_eco_socialist_mixed_economy
			remove_ideology = ideology_cit_internationalist
			add_ideology = ideology_cit_liberal_nationalist
			leader = {
				if = {
					limit = {
						OR = {
							has_ideology = ideology:ideology_socialist_leader
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_anarchist
						}
					}
					set_ideology = ideology:ideology_social_democrat
				}
			}
		}
	}
}

bpm_socdem_utils.2 = { # Make sure reformists become socdems
	type = country_event
	placement = root
	hidden = yes

	trigger = {
		any_interest_group = {
			has_ideology = ideology:ideology_ig_social_democrat
			NOT = { has_ideology = ideology:ideology_ig_reformist_socialist }
			leader = {
				OR = {
					has_ideology = ideology:ideology_socialist_leader
					has_ideology = ideology:ideology_communist
					has_ideology = ideology:ideology_anarchist
				}
			}
		}
	}

	immediate = {
		every_interest_group = {
			limit = {
				has_ideology = ideology:ideology_ig_social_democrat
				NOT = { has_ideology = ideology:ideology_ig_reformist_socialist }
			}
			leader = {
				if = {
					limit = {
						OR = {
							has_ideology = ideology:ideology_socialist_leader
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_anarchist
						}
					}
					set_ideology = ideology:ideology_social_democrat
				}
			}
		}
	}
}